<Window x:Class="Photobooth.Controls.TemplateUploadDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Upload Templates" 
        Width="600" Height="450"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        Background="Transparent"
        AllowsTransparency="True"
        ResizeMode="NoResize">
    
    <Border Background="White" 
            CornerRadius="12" 
            BorderThickness="0"
            Margin="8">
        
        <Border.Effect>
            <DropShadowEffect Color="#000000" BlurRadius="25" ShadowDepth="5" Opacity="0.2"/>
        </Border.Effect>
        
        <Grid Margin="24">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Header -->
            <StackPanel Grid.Row="0" Margin="0,0,0,24">
                <TextBlock Text="Upload Templates" 
                          FontSize="24" 
                          FontWeight="SemiBold" 
                          Foreground="#111827" 
                          Margin="0,0,0,8"/>
                <TextBlock Text="Choose your upload method and add templates to your PhotoBooth" 
                          FontSize="14" 
                          Foreground="#6B7280"/>
            </StackPanel>
            
            <!-- Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    
                    <!-- Upload Method Selection (Step 1) -->
                    <GroupBox Header="Step 1: Choose Upload Method" 
                              Margin="0,0,0,20"
                              Padding="16"
                              BorderBrush="#E5E7EB"
                              BorderThickness="1">
                        <StackPanel>
                            <RadioButton x:Name="FolderUploadRadio" 
                                        Content="Upload from Folders" 
                                        FontSize="14" 
                                        Margin="0,0,0,8"
                                        IsChecked="True"
                                        Checked="UploadMethodRadio_Checked"/>
                            <TextBlock Text="Select individual template folders from your computer (requires layout selection)" 
                                      FontSize="12" 
                                      Foreground="#6B7280" 
                                      Margin="20,0,0,12"/>
                            
                            <RadioButton x:Name="ZipUploadRadio" 
                                        Content="Upload from ZIP File" 
                                        FontSize="14" 
                                        Margin="0,0,0,8"
                                        Checked="UploadMethodRadio_Checked"/>
                            <TextBlock Text="Upload templates from a ZIP archive (auto-detects layouts from template dimensions)" 
                                      FontSize="12" 
                                      Foreground="#6B7280" 
                                      Margin="20,0,0,0"/>
                        </StackPanel>
                    </GroupBox>
                    
                    <!-- Layout Selection (Step 2) -->
                    <GroupBox Header="Step 2: Select Template Layout" 
                              Margin="0,0,0,20"
                              Padding="16"
                              BorderBrush="#E5E7EB"
                              BorderThickness="1">
                        <StackPanel>
                            <TextBlock x:Name="LayoutSelectionHint"
                                      Text="Please select the target layout for these templates" 
                                      FontSize="13" 
                                      Foreground="#6B7280" 
                                      Margin="0,0,0,12"/>
                            
                            <ComboBox x:Name="LayoutComboBox" 
                                     Height="40"
                                     FontSize="14"
                                     DisplayMemberPath="LayoutKey"
                                     SelectedValuePath="Id"
                                     SelectionChanged="LayoutComboBox_SelectionChanged">
                                <!-- Layouts will be loaded dynamically -->
                            </ComboBox>
                            
                            <!-- Layout Details -->
                            <StackPanel x:Name="LayoutDetailsPanel" 
                                       Margin="0,12,0,0" 
                                       Visibility="Collapsed">
                                <Border Background="#F8FAFC" 
                                       BorderBrush="#E2E8F0" 
                                       BorderThickness="1" 
                                       CornerRadius="6" 
                                       Padding="12">
                                    <StackPanel>
                                        <TextBlock x:Name="LayoutDimensionsText" 
                                                  FontSize="12" 
                                                  Foreground="#64748B" 
                                                  Margin="0,0,0,4"/>
                                        <TextBlock x:Name="LayoutDescriptionText" 
                                                  FontSize="12" 
                                                  Foreground="#64748B"/>
                                    </StackPanel>
                                </Border>
                            </StackPanel>
                        </StackPanel>
                    </GroupBox>
                    
                    <!-- Template Requirements -->
                    <GroupBox Header="Template Requirements" 
                              Padding="16"
                              BorderBrush="#E5E7EB"
                              BorderThickness="1">
                        <StackPanel>
                            <TextBlock Text="Each template folder must contain:" 
                                      FontSize="13" 
                                      FontWeight="Medium" 
                                      Foreground="#374151" 
                                      Margin="0,0,0,8"/>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                <TextBlock Text="✓" FontSize="12" Foreground="#10B981" Margin="0,0,8,0"/>
                                <TextBlock Text="template.png - Main template image" FontSize="12" Foreground="#6B7280"/>
                            </StackPanel>
                            
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                <TextBlock Text="✓" FontSize="12" Foreground="#10B981" Margin="0,0,8,0"/>
                                <TextBlock Text="preview.jpg or preview.png - Preview image (optional)" FontSize="12" Foreground="#6B7280"/>
                            </StackPanel>
                            
                            <Border Background="#FEF3C7" 
                                   BorderBrush="#F59E0B" 
                                   BorderThickness="1" 
                                   CornerRadius="6" 
                                   Padding="12" 
                                   Margin="0,12,0,0">
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="⚠" FontSize="14" Foreground="#D97706" Margin="0,0,8,0"/>
                                    <TextBlock Text="For folder uploads: templates will be assigned to the selected layout. For ZIP uploads: layouts will be auto-detected from template dimensions." 
                                              FontSize="12" 
                                              Foreground="#92400E" 
                                              TextWrapping="Wrap"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </GroupBox>
                    
                </StackPanel>
            </ScrollViewer>
            
            <!-- Buttons -->
            <StackPanel Grid.Row="2" 
                       Orientation="Horizontal" 
                       HorizontalAlignment="Right"
                       Margin="0,24,0,0">
                
                <!-- Cancel Button -->
                <Button x:Name="CancelButton" 
                       Content="Cancel" 
                       Width="90" 
                       Height="36" 
                       Margin="0,0,12,0" 
                       Background="Transparent" 
                       BorderBrush="#D1D5DB" 
                       BorderThickness="1" 
                       Foreground="#374151" 
                       FontSize="14" 
                       FontWeight="Medium"
                       Cursor="Hand"
                       Click="CancelButton_Click">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                   BorderBrush="{TemplateBinding BorderBrush}" 
                                   BorderThickness="{TemplateBinding BorderThickness}" 
                                   CornerRadius="6"
                                   x:Name="ButtonBorder">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#F9FAFB"/>
                                    <Setter TargetName="ButtonBorder" Property="BorderBrush" Value="#9CA3AF"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#F3F4F6"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
                <!-- Upload Button -->
                <Button x:Name="UploadButton" 
                       Content="Start Upload" 
                       Width="120" 
                       Height="36" 
                       Background="#3B82F6" 
                       BorderThickness="0" 
                       Foreground="White" 
                       FontSize="14" 
                       FontWeight="Medium"
                       Cursor="Hand"
                       Click="UploadButton_Click"
                       IsEnabled="False">
                    <Button.Template>
                        <ControlTemplate TargetType="Button">
                            <Border Background="{TemplateBinding Background}" 
                                   CornerRadius="6"
                                   x:Name="ButtonBorder">
                                <ContentPresenter HorizontalAlignment="Center" 
                                                VerticalAlignment="Center"/>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsMouseOver" Value="True">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#2563EB"/>
                                </Trigger>
                                <Trigger Property="IsPressed" Value="True">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#1D4ED8"/>
                                </Trigger>
                                <Trigger Property="IsEnabled" Value="False">
                                    <Setter TargetName="ButtonBorder" Property="Background" Value="#9CA3AF"/>
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Button.Template>
                </Button>
                
            </StackPanel>
            
        </Grid>
    </Border>
</Window> 