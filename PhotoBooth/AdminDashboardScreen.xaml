<UserControl x:Class="Photobooth.AdminDashboardScreen"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:local="clr-namespace:Photobooth.Views"
             xmlns:behaviors="clr-namespace:Photobooth.Behaviors"
             mc:Ignorable="d"
             d:DesignHeight="5080" d:DesignWidth="1920">

    <UserControl.Resources>
        <!-- Modern Card Style -->
        <Style x:Key="ModernCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="24"/>
            <Setter Property="Margin" Value="12"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="4" BlurRadius="16" Opacity="0.1"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Tab Button Style -->
        <Style x:Key="TabButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#64748B"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="0"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F1F5F9"/>
                            </Trigger>
                            <Trigger Property="Tag" Value="Active">
                                <Setter Property="Background" Value="#F1F5F9"/>
                                <Setter Property="Foreground" Value="#1E293B"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Sales Card Style -->
        <Style x:Key="SalesCardStyle" TargetType="Border">
            <Setter Property="Background" Value="White"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="20"/>
            <Setter Property="Margin" Value="8"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="BorderBrush" Value="#E2E8F0"/>
            <Setter Property="Effect">
                <Setter.Value>
                    <DropShadowEffect Color="Black" Direction="270" ShadowDepth="4" BlurRadius="16" Opacity="0.15"/>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Status Indicator Style -->
        <Style x:Key="StatusIndicatorStyle" TargetType="Border">
            <Setter Property="Background" Value="#EBF8FF"/>
            <Setter Property="BorderBrush" Value="#93C5FD"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="8"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Margin" Value="4,0"/>
        </Style>

        <!-- Modern Button Style -->
        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#2563EB"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1D4ED8"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#60A5FA"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#9CA3AF"/>
                                <Setter Property="Foreground" Value="#E5E7EB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Progress Bar Style -->
        <Style x:Key="ModernProgressBarStyle" TargetType="ProgressBar">
            <Setter Property="Background" Value="#E2E8F0"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Height" Value="8"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ProgressBar">
                        <Border Background="{TemplateBinding Background}" 
                                CornerRadius="4">
                            <Grid>
                                <Border x:Name="PART_Track" Background="{TemplateBinding Background}" CornerRadius="4"/>
                                <Border x:Name="PART_Indicator" Background="#10B981" CornerRadius="4" HorizontalAlignment="Left"/>
                            </Grid>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Rounded TextBox Style -->
        <Style x:Key="RoundedTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#CBD5E1"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="10,0"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Height" Value="40"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="8">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Modern Toggle Switch Style -->
        <Style x:Key="ModernToggleSwitchStyle" TargetType="ToggleButton">
            <Setter Property="Width" Value="48"/>
            <Setter Property="Height" Value="24"/>
            <Setter Property="Background" Value="#E5E7EB"/>
            <Setter Property="BorderBrush" Value="#D1D5DB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ToggleButton">
                        <Grid>
                            <Border x:Name="SwitchTrack"
                                    Background="{TemplateBinding Background}"
                                    BorderBrush="{TemplateBinding BorderBrush}"
                                    BorderThickness="{TemplateBinding BorderThickness}"
                                    CornerRadius="12"/>
                            <Ellipse x:Name="SwitchThumb"
                                     Width="20" Height="20"
                                     Fill="White"
                                     Margin="2,2,0,2"
                                     HorizontalAlignment="Left"/>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsChecked" Value="True">
                                <Setter TargetName="SwitchTrack" Property="Background" Value="#2563EB"/>
                                <Setter TargetName="SwitchThumb" Property="HorizontalAlignment" Value="Right"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Quick Credit Button Style -->
        <Style x:Key="QuickCreditButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#F8FAFC"/>
            <Setter Property="Foreground" Value="#1F2937"/>
            <Setter Property="BorderBrush" Value="#E5E7EB"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="15"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Height" Value="48"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#374151"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="BorderBrush" Value="#374151"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1F2937"/>
                                <Setter Property="Foreground" Value="White"/>
                                <Setter Property="BorderBrush" Value="#1F2937"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Admin Action Button Style -->
        <Style x:Key="AdminActionButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="#3B82F6"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#3B82F6"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" 
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#1E40AF"/>
                                <Setter Property="BorderBrush" Value="#1E40AF"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#1E3A8A"/>
                                <Setter Property="BorderBrush" Value="#1E3A8A"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Background" Value="#9CA3AF"/>
                                <Setter Property="BorderBrush" Value="#9CA3AF"/>
                                <Setter Property="Foreground" Value="#E5E7EB"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <!-- Main Container -->
    <Grid>
        <!-- Gradient Background -->
        <Grid.Background>
            <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                <GradientStop Color="#F8FAFC" Offset="0"/>
                <GradientStop Color="#EBF4FF" Offset="1"/>
            </LinearGradientBrush>
        </Grid.Background>

        <!-- Floating Background Elements -->
        <Canvas IsHitTestVisible="False">
            <!-- Top Left Corner -->
            <Ellipse Width="160" Height="160" Canvas.Left="-80" Canvas.Top="-80" Opacity="0.05">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#60A5FA" Offset="0"/>
                        <GradientStop Color="#A78BFA" Offset="1"/>
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <Ellipse Width="96" Height="96" Canvas.Left="1600" Canvas.Top="128" Opacity="0.08">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#A78BFA" Offset="0"/>
                        <GradientStop Color="#F472B6" Offset="1"/>
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <Ellipse Width="192" Height="192" Canvas.Left="-96" Canvas.Top="792" Opacity="0.04">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#22D3EE" Offset="0"/>
                        <GradientStop Color="#60A5FA" Offset="1"/>
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>

            <Ellipse Width="144" Height="144" Canvas.Left="1712" Canvas.Top="872" Opacity="0.06">
                <Ellipse.Fill>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FB923C" Offset="0"/>
                        <GradientStop Color="#FBBF24" Offset="1"/>
                    </LinearGradientBrush>
                </Ellipse.Fill>
            </Ellipse>
        </Canvas>

        <!-- Header Section -->
        <Border VerticalAlignment="Top" Height="Auto" Padding="24" Margin="0,16,0,0">
            <Border.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                    <GradientStop Color="#F1F5F9" Offset="0"/>
                    <GradientStop Color="#EBF4FF" Offset="1"/>
                </LinearGradientBrush>
            </Border.Background>
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="1" BlurRadius="8" Opacity="0.05"/>
            </Border.Effect>

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Top Header Row -->
                <Grid Grid.Row="0" Margin="0,0,0,16">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" VerticalAlignment="Center">
                        <TextBlock Text="Photobooth Admin" FontSize="24" FontWeight="Bold" Foreground="#475569" Margin="0,0,16,0"/>
                        <Border Name="AccessLevelBadge" Background="#D1FAE5" BorderBrush="#10B981" BorderThickness="1" CornerRadius="16" Padding="12,4">
                            <TextBlock Name="AccessLevelText" Text="Master Access" FontSize="14" FontWeight="Medium" Foreground="#065F46"/>
                        </Border>
                    </StackPanel>

                    <Button Name="ExitAdminButton" HorizontalAlignment="Right" VerticalAlignment="Center" 
                            Background="White" BorderBrush="#E2E8F0" BorderThickness="1" 
                            Foreground="#475569" Padding="16,8" FontSize="14" FontWeight="Medium"
                            Cursor="Hand" Click="ExitAdminButton_Click">
                        <Button.Template>
                            <ControlTemplate TargetType="Button">
                                <Border Background="{TemplateBinding Background}" 
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        CornerRadius="6" 
                                        Padding="{TemplateBinding Padding}">
                                    <StackPanel Orientation="Horizontal">
                                        <TextBlock Text="🏠" FontSize="16" Margin="0,0,8,0"/>
                                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </Border>
                                <ControlTemplate.Triggers>
                                    <Trigger Property="IsMouseOver" Value="True">
                                        <Setter Property="Background" Value="#F8FAFC"/>
                                    </Trigger>
                                </ControlTemplate.Triggers>
                            </ControlTemplate>
                        </Button.Template>
                        Exit Admin
                    </Button>
                </Grid>

                <!-- Hardware Status Bar -->
                <Grid Grid.Row="1" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <!-- Left Side - Hardware Status -->
                    <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                        <!-- Camera Status -->
                        <Border Style="{StaticResource StatusIndicatorStyle}">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse Name="CameraStatusDot" Width="8" Height="8" Fill="#10B981" Margin="0,0,8,0"/>
                                <TextBlock Text="Camera" FontSize="12" Foreground="#475569"/>
                            </StackPanel>
                        </Border>

                        <Rectangle Width="1" Height="16" Fill="#CBD5E1" Margin="8,0"/>

                        <!-- Printer Status -->
                        <Border Style="{StaticResource StatusIndicatorStyle}">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse Name="PrinterStatusDot" Width="8" Height="8" Fill="#EF4444" Margin="0,0,8,0"/>
                                <TextBlock Text="Printer" FontSize="12" Foreground="#475569"/>
                            </StackPanel>
                        </Border>

                        <Rectangle Width="1" Height="16" Fill="#CBD5E1" Margin="8,0"/>

                        <!-- Arduino Status -->
                        <Border Style="{StaticResource StatusIndicatorStyle}">
                            <StackPanel Orientation="Horizontal">
                                <Ellipse Name="ArduinoStatusDot" Width="8" Height="8" Fill="#10B981" Margin="0,0,8,0"/>
                                <TextBlock Text="Arduino" FontSize="12" Foreground="#475569"/>
                            </StackPanel>
                        </Border>

                        <Rectangle Width="1" Height="16" Fill="#CBD5E1" Margin="8,0"/>


                        <!-- Current Mode -->
                        <Border Margin="0,0,0,0" BorderBrush="#93C5FD" BorderThickness="0" Padding="2,6,0,6" 
                                >
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Current Mode:" FontSize="12" Foreground="#64748B" Margin="0,0,8,0"/>
                                <TextBlock Name="CurrentModeText" Text="Coin Operated" FontSize="12" FontWeight="Medium" Foreground="#475569"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>

                    <!-- Right Side - Error & Prints -->
                    <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                        <!-- Error Code -->
                        <Border Name="ErrorCodeBorder" Background="#FEF3C7" BorderBrush="#F59E0B" BorderThickness="1" 
                                CornerRadius="8" Padding="12,6" Margin="0,0,16,0" Visibility="Visible">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="⚠️" FontSize="14" Margin="0,0,8,0"/>
                                <TextBlock Name="ErrorCodeText" Text="Error 01: Printer Not Found" FontSize="12" FontWeight="Medium" Foreground="#92400E"/>
                            </StackPanel>
                        </Border>

                        <!-- Prints Remaining -->
                        <Border Background="#F8FAFC" BorderBrush="#E2E8F0" BorderThickness="1" CornerRadius="8" Padding="12,6">
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="Prints Remaining:" FontSize="12" Foreground="#64748B" Margin="0,0,12,0"/>
                                <Border Width="120" Height="10" Background="#E2E8F0" CornerRadius="8" Margin="0,0,12,0">
                                    <Border Name="PrintsProgressIndicator" Background="#10B981" CornerRadius="5" 
                                            HorizontalAlignment="Left" Width="112"/>
                                </Border>
                                <TextBlock Name="PrintsRemainingText" Text="650" FontSize="12" FontWeight="Medium" Foreground="#475569"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </Grid>

                <!-- Breadcrumbs -->
                <StackPanel Grid.Row="2" Orientation="Horizontal">
                    <TextBlock Text="Admin" FontSize="14" Foreground="#94A3B8" Margin="0,0,4,0"/>
                    <TextBlock Text=">" FontSize="12" Foreground="#CBD5E1" Margin="0,0,4,0"/>
                    <TextBlock Name="BreadcrumbText" Text="Sales" FontSize="14" FontWeight="Medium" Foreground="#475569"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content Area -->
        <Grid Margin="0,220,0,0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Tab Navigation -->
            <Border Grid.Row="0" Background="#F1F5F9" Margin="24,0,24,24" CornerRadius="12" Padding="0,0,0,0">
                <Grid Height="48">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Button Name="SalesTab" Grid.Column="0" Style="{StaticResource TabButtonStyle}" Tag="Active" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📊" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Sales" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>

                    <Button Name="SettingsTab" Grid.Column="1" Style="{StaticResource TabButtonStyle}" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="⚙️" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Settings" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>

                    <Button Name="ProductsTab" Grid.Column="2" Style="{StaticResource TabButtonStyle}" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📦" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Products" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>

                    <Button Name="TemplatesTab" Grid.Column="3" Style="{StaticResource TabButtonStyle}" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📅" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Templates" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>

                    <Button Name="DiagnosticsTab" Grid.Column="4" Style="{StaticResource TabButtonStyle}" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="🔧" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Diagnostics" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>

                    <Button Name="SystemTab" Grid.Column="5" Style="{StaticResource TabButtonStyle}" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="💻" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="System" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>

                    <Button Name="CreditsTab" Grid.Column="6" Style="{StaticResource TabButtonStyle}" Click="TabButton_Click">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="💰" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Credits" FontSize="14" FontWeight="Medium"/>
                        </StackPanel>
                    </Button>
                </Grid>
            </Border>

            <!-- Tab Content -->
            <ScrollViewer x:Name="MainScrollViewer" Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="24,0,24,24">
                <Grid>
                    <!-- Sales Tab Content -->
                    <Grid Name="SalesTabContent"  Visibility="Collapsed">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <!-- Analytics Section Header -->
                        <Grid Grid.Row="0" Margin="12,0,12,24">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <!-- Header Row with Title and Export Button -->
                            <Grid Grid.Row="0" Margin="0,0,0,8">
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                    <TextBlock Text="Analytics" FontSize="28" FontWeight="Bold" Foreground="#1E293B"/>
                                </StackPanel>

                                <Button Name="ExportButton" HorizontalAlignment="Right" VerticalAlignment="Center" 
                                        Background="White" BorderBrush="#E2E8F0" BorderThickness="1" 
                                        Foreground="#475569" Padding="12,6" FontSize="14" FontWeight="Medium"
                                        Cursor="Hand" Click="ExportButton_Click">
                                    <Button.Template>
                                        <ControlTemplate TargetType="Button">
                                            <Border Background="{TemplateBinding Background}" 
                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                    CornerRadius="6" 
                                                    Padding="{TemplateBinding Padding}">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="⬇️" FontSize="14" Margin="0,0,6,0"/>
                                                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                </StackPanel>
                                            </Border>
                                            <ControlTemplate.Triggers>
                                                <Trigger Property="IsMouseOver" Value="True">
                                                    <Setter Property="Background" Value="#F8FAFC"/>
                                                </Trigger>
                                            </ControlTemplate.Triggers>
                                        </ControlTemplate>
                                    </Button.Template>
                                    Export
                                </Button>
                            </Grid>

                            <!-- Description Row -->
                            <TextBlock Grid.Row="1" Text="Track your photobooth performance and revenue" FontSize="16" Foreground="#64748B"/>
                        </Grid>

                        <!-- Sales Cards -->
                        <UniformGrid Grid.Row="1" Columns="4" Margin="0,0,0,24">
                            <!-- Today -->
                            <Border Style="{StaticResource SalesCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="Today" FontSize="14" Foreground="#059669" FontWeight="Medium" Margin="0,0,0,4"/>
                                    <TextBlock Name="TodaySales" Text="$127.50" FontSize="32" FontWeight="Bold" Foreground="#065F46" Margin="0,0,0,4"/>
                                    <TextBlock Name="TodayChange" Text="+12% from yesterday" FontSize="12" Foreground="#059669" FontWeight="Medium"/>
                                </StackPanel>
                            </Border>

                            <!-- This Week -->
                            <Border Style="{StaticResource SalesCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="This Week" FontSize="14" Foreground="#059669" FontWeight="Medium" Margin="0,0,0,4"/>
                                    <TextBlock Name="WeekSales" Text="$892.25" FontSize="32" FontWeight="Bold" Foreground="#065F46" Margin="0,0,0,4"/>
                                    <TextBlock Name="WeekChange" Text="+8% from last week" FontSize="12" Foreground="#059669" FontWeight="Medium"/>
                                </StackPanel>
                            </Border>

                            <!-- This Month -->
                            <Border Style="{StaticResource SalesCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="This Month" FontSize="14" Foreground="#059669" FontWeight="Medium" Margin="0,0,0,4"/>
                                    <TextBlock Name="MonthSales" Text="$3456.75" FontSize="32" FontWeight="Bold" Foreground="#065F46" Margin="0,0,0,4"/>
                                    <TextBlock Name="MonthChange" Text="+15% from last month" FontSize="12" Foreground="#059669" FontWeight="Medium"/>
                                </StackPanel>
                            </Border>

                            <!-- This Year -->
                            <Border Style="{StaticResource SalesCardStyle}">
                                <StackPanel>
                                    <TextBlock Text="This Year" FontSize="14" Foreground="#059669" FontWeight="Medium" Margin="0,0,0,4"/>
                                    <TextBlock Name="YearSales" Text="$41481.00" FontSize="32" FontWeight="Bold" Foreground="#065F46" Margin="0,0,0,4"/>
                                    <TextBlock Name="YearChange" Text="+22% from last year" FontSize="12" Foreground="#059669" FontWeight="Medium"/>
                                </StackPanel>
                            </Border>
                        </UniformGrid>

                        <!-- Custom Period Report -->
                        <Border Grid.Row="2" Style="{StaticResource ModernCardStyle}" Margin="12,0,12,24">
                            <StackPanel>
                                <!-- Custom Period Report Header -->
                                <Border Background="#F2F7FE" CornerRadius="0" Padding="16" Margin="-24,-24,-24,20">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,8">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                                <TextBlock Text="Custom Period Report" FontSize="20" FontWeight="Bold" Foreground="#1E293B"/>
                                            </StackPanel>
                                        </Grid>
                                        <TextBlock Text="Generate detailed sales report for a specific date range" FontSize="14" Foreground="#64748B"/>
                                    </StackPanel>
                                </Border>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="200"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Column="0" Text="Start Date" FontSize="14" Foreground="#475569" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <DatePicker Grid.Column="1" Name="StartDatePicker" Height="44" BorderBrush="#D1D5DB" BorderThickness="1" Margin="0,0,16,0"/>
                                    <TextBlock Grid.Column="2" Text="End Date" FontSize="14" Foreground="#475569" VerticalAlignment="Center" Margin="0,0,12,0"/>
                                    <DatePicker Grid.Column="3" Name="EndDatePicker" Height="44" BorderBrush="#D1D5DB" BorderThickness="1" Margin="0,0,16,0"/>
                                    <Button Grid.Column="5" Style="{StaticResource ModernButtonStyle}" Click="GenerateReport_Click" Height="44">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="Generate Report" FontSize="14"/>
                                        </StackPanel>
                                    </Button>
                                </Grid>
                            </StackPanel>
                        </Border>

                        <!-- Transaction History -->
                        <Border Grid.Row="3" Style="{StaticResource ModernCardStyle}" Margin="12,0,12,24">
                            <StackPanel>
                                <!-- Transaction History Header -->
                                <Border Background="#F2F7FE" CornerRadius="0" Padding="16" Margin="-24,-24,-24,20">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,8">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                                <TextBlock Text="Recent Transactions" FontSize="20" FontWeight="Bold" Foreground="#1E293B"/>
                                            </StackPanel>
                                            <Button Name="RefreshTransactionsButton" HorizontalAlignment="Right" VerticalAlignment="Center" 
                                                    Background="Transparent" BorderBrush="Transparent" BorderThickness="0" 
                                                    Foreground="#475569" Padding="8,4" FontSize="12" FontWeight="Medium"
                                                    Cursor="Hand" Click="RefreshTransactions_Click">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="🔄" FontSize="12" Margin="0,0,4,0"/>
                                                    <TextBlock Text="Refresh"/>
                                                </StackPanel>
                                            </Button>
                                        </Grid>
                                        <TextBlock Text="View detailed transaction history and payment records" FontSize="14" Foreground="#64748B"/>
                                    </StackPanel>
                                </Border>

                                <!-- Transaction List -->
                                <ScrollViewer Name="TransactionScrollViewer" MaxHeight="400" VerticalScrollBarVisibility="Auto">
                                    <StackPanel Name="TransactionHistoryPanel">
                                        <!-- Transactions will be populated here -->
                                        <TextBlock Name="NoTransactionsMessage" 
                                                   Text="No transactions found. Sales data will appear here after customer purchases."
                                                   FontSize="14" 
                                                   Foreground="#6B7280"
                                                   HorizontalAlignment="Center" 
                                                   Margin="0,20,0,20"
                                                   Visibility="Visible"/>
                                    </StackPanel>
                                </ScrollViewer>
                            </StackPanel>
                        </Border>

                        <!-- Print Status & Supplies -->
                        <Border Grid.Row="4" Style="{StaticResource ModernCardStyle}">
                            <StackPanel>
                                <!-- Print Status & Supplies Header -->
                                <Border Background="#F2F7FE" CornerRadius="0" Padding="16" Margin="-24,-24,-24,24">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,10">
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                                                <TextBlock Text="🖨️" FontSize="20" Margin="0,0,12,0"/>
                                                <TextBlock Text="Print Status &amp; Supplies" FontSize="18" FontWeight="Bold" Foreground="#1E293B"/>
                                            </StackPanel>
                                        </Grid>
                                        <TextBlock Text="Current paper/ink status and RFID monitoring" FontSize="14" Foreground="#64748B"/>
                                    </StackPanel>
                                </Border>

                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <StackPanel Grid.Column="0" Margin="0,0,32,0">
                                        <TextBlock Name="PrintsRemainingLarge" Text="650" FontSize="48" FontWeight="Bold" Foreground="#475569" Margin="0,0,0,8"/>
                                        <TextBlock Text="Prints remaining (700 per roll)" FontSize="14" Foreground="#64748B"/>
                                    </StackPanel>

                                    <StackPanel Grid.Column="1" VerticalAlignment="Center" Margin="0,0,32,0">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                            <TextBlock Text="93%" FontSize="18" FontWeight="SemiBold" Foreground="#475569"/>
                                            <TextBlock Text="Roll capacity" FontSize="14" Foreground="#64748B" Margin="8,0,0,0" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <Border Background="#E2E8F0" Height="16" CornerRadius="8">
                                            <Border Name="PrintsProgressBar" Background="#10B981" CornerRadius="8" 
                                                    HorizontalAlignment="Left" Width="280"/>
                                        </Border>
                                    </StackPanel>

                                    <StackPanel Grid.Column="2" VerticalAlignment="Center">
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                            <Ellipse Width="12" Height="12" Fill="#10B981" Margin="0,0,8,0"/>
                                            <TextBlock Text="RFID Roll Detection: Active" FontSize="12" Foreground="#64748B"/>
                                        </StackPanel>
                                        <Button Style="{StaticResource ModernButtonStyle}" Background="#F59E0B" Click="SimulateNewRoll_Click">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="🔄" FontSize="14" Margin="0,0,8,0"/>
                                                <TextBlock Text="Simulate New Roll" FontSize="14"/>
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>
                                </Grid>
                            </StackPanel>
                        </Border>
                    </Grid>

                    <!-- Settings Tab Content -->
                    <Grid Name="SettingsTabContent" Visibility="Collapsed">
                        <!-- Main Container -->
                        <Grid>
                            <!-- Header Section -->
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>

                            <!-- Header -->
                            <Grid Grid.Row="0" Margin="0,0,0,32">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                                
                                <StackPanel Grid.Column="0">
                                    <TextBlock Text="Settings" FontSize="32" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,8"/>
                                <TextBlock Text="Configure your photobooth system and preferences" FontSize="16" Foreground="#64748B"/>
                            </StackPanel>
                                
                                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                                    <!-- Online Status Badge -->
                                    <Border Background="#ECFDF5" BorderBrush="#BBF7D0" BorderThickness="1" CornerRadius="5" Padding="12,6" Margin="0,0,12,0">
                                        <StackPanel Orientation="Horizontal">
                                            <Ellipse Width="8" Height="8" Fill="#10B981" Margin="0,0,8,0">
                                                <Ellipse.Effect>
                                                    <DropShadowEffect Color="#10B981" BlurRadius="1" ShadowDepth="0" Opacity="0.5"/>
                                                </Ellipse.Effect>
                                            </Ellipse>
                                            <TextBlock Text="Online" FontSize="14" FontWeight="Medium" Foreground="#047857"/>
                                        </StackPanel>
                                    </Border>
                                    
                                    <!-- Save Button -->
                                    <Button Name="SaveSettingsButton" Style="{StaticResource ModernButtonStyle}" Background="#10B981" Foreground="White" Padding="16,8" Margin="0,0,12,0" Click="SaveSettings_Click">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="💾" FontSize="14" Margin="8,0,8,0"/>
                                            <TextBlock Text="Save Settings" FontSize="14" Margin="0,0,10,0"/>
                                        </StackPanel>
                                    </Button>

                                </StackPanel>
                            </Grid>

                            <!-- Main Content Grid -->
                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="2*"/>
                                    <ColumnDefinition Width="24"/>
                                    <ColumnDefinition Width="1*"/>
                                </Grid.ColumnDefinitions>

                                <!-- Left Column: Main Settings (2/3 width) -->
                                <StackPanel Grid.Column="0" VerticalAlignment="Top">
                                    
                            <!-- Business Information Card -->
                                    <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,24" Background="White" BorderThickness="0" CornerRadius="12">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                        </Border.Effect>
                                        <StackPanel Margin="24">
                                            <!-- Card Header -->
                                            <StackPanel Margin="0,0,0,24">
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                    <Border Width="32" Height="32" Background="#DBEAFE" CornerRadius="8" Margin="0,0,12,0">
                                                        <TextBlock Text="📤" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                    </Border>
                                <StackPanel>
                                                        <TextBlock Text="Business Information" FontSize="18" FontWeight="Bold" Foreground="#0F172A"/>
                                                        <TextBlock Text="Your business details and branding" FontSize="14" Foreground="#64748B" Margin="0,3,0,0"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- Logo Upload Section -->
                                            <StackPanel Margin="0,0,0,24">
                                                <TextBlock Text="Business Logo" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,12"/>
                                                <StackPanel Orientation="Horizontal">
                                                    <Border Width="80" Height="80" Background="#F8FAFC" BorderBrush="#E2E8F0" BorderThickness="2" CornerRadius="8" Margin="0,0,16,0">
                                                        <Border.Style>
                                                            <Style TargetType="Border">
                                                                <Style.Triggers>
                                                                    <Trigger Property="IsMouseOver" Value="True">
                                                                        <Setter Property="BorderBrush" Value="#3B82F6"/>
                                                                        <Setter Property="Background" Value="#EFF6FF"/>
                                                                    </Trigger>
                                                                </Style.Triggers>
                                                            </Style>
                                                        </Border.Style>
                                                        <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                                                            <Image Name="LogoImage" Visibility="Collapsed" Stretch="Uniform"/>
                                                            <TextBlock Name="LogoPlaceholderText" Text="📤" FontSize="24" Foreground="#9CA3AF" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </StackPanel>
                                        </Border>
                                                    <StackPanel VerticalAlignment="Center">
                                                        <Border Width="120" Height="40" Background="#F8FAFC" BorderBrush="#E2E8F0" BorderThickness="1" CornerRadius="8" Margin="0,0,16,0">
                                                            <Border.Style>
                                                                <Style TargetType="Border">
                                                                    <Style.Triggers>
                                                                        <Trigger Property="IsMouseOver" Value="True">
                                                                            <Setter Property="BorderBrush" Value="#3B82F6"/>
                                                                            <Setter Property="Background" Value="#EFF6FF"/>
                                                                        </Trigger>
                                                                    </Style.Triggers>
                                                                </Style>
                                                            </Border.Style>
                                                            <StackPanel VerticalAlignment="Center">

                                                                <Button Content="Upload Logo" Style="{StaticResource ModernButtonStyle}" Background="#F5F5F5" Foreground="Black" Margin="0,6,0,8" Padding="16,8" Click="UploadLogoButton_Click"/>
                                        </StackPanel>
                                                        </Border>
                                                        <TextBlock Text="PNG, JPG up to 5MB" FontSize="12" Margin="0,10,0,0" Foreground="#6B7280"/>
                                    </StackPanel>
                                                </StackPanel>
                                            </StackPanel>

                                            <!-- Business Details -->
                                            <StackPanel>
                                                <TextBlock Text="Business Name" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBox Name="BusinessNameTextBox" Text="Downtown Event Center" Style="{StaticResource RoundedTextBoxStyle}" Padding="10" Height="44" Margin="0,0,0,16" BorderBrush="#D1D5DB" Background="White"
                                 behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" />
                                                
                                                <TextBlock Text="Location" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBox Name="LocationTextBox" Text="Main Street, Downtown" Style="{StaticResource RoundedTextBoxStyle}" Padding="10" Height="44" Margin="0,0,0,24" BorderBrush="#D1D5DB" Background="White"
                                 behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" />
                                                
                                                <!-- Show Logo Option -->
                                                <Border Background="#F8FAFC" Padding="16" CornerRadius="8" BorderBrush="#E5E7EB" BorderThickness="1">
                                            <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*" />
                                                            <!-- Takes all remaining space -->
                                                            <ColumnDefinition Width="Auto" />
                                                            <!-- Takes space as needed -->
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Text Content -->
                                                        <StackPanel Grid.Column="0" Margin="0,0,16,0">
                                                            <TextBlock Text="Show logo on prints" FontSize="14" FontWeight="Medium" Foreground="#374151"/>
                                                            <TextBlock Text="Display your logo on all printed photos" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>

                                                        <!-- Toggle Switch -->
                                                        <ToggleButton Grid.Column="1" Name="ShowLogoToggle" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" IsChecked="True" VerticalAlignment="Center"/>
                                            </Grid>
                                        </Border>

                                    </StackPanel>
                                </StackPanel>
                            </Border>


                                    <!-- System Preferences Card -->
                                    <Border Style="{StaticResource ModernCardStyle}" Background="White" BorderThickness="0" CornerRadius="12">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                        </Border.Effect>
                                        <StackPanel Margin="24">
                                            <TextBlock Text="System Preferences" FontSize="18" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,4"/>
                                            <TextBlock Text="Audio, display, and operational settings" FontSize="14" Foreground="#64748B" Margin="0,0,0,16"/>
                                            
                                            <!-- Audio Volume -->
                                            <StackPanel Margin="0,0,0,24">
                                                <TextBlock Text="Audio Volume" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,12"/>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="32"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="48"/>
                                                        <ColumnDefinition Width="48"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="0%" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center"/>
                                                    <Slider Name="VolumeSlider" Grid.Column="1" Minimum="0" Maximum="100" Value="75" Margin="8,0" ValueChanged="VolumeSlider_ValueChanged"/>
                                                    <TextBlock Grid.Column="2" Text="100%" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" HorizontalAlignment="Right"/>
                                                    <TextBlock Name="VolumeValueText" Grid.Column="3" Text="75%" FontSize="14" FontWeight="Medium" Foreground="#3B82F6" HorizontalAlignment="Right" VerticalAlignment="Center"/>
                                                </Grid>
                                            </StackPanel>

                                            <!-- System Toggles -->
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="12"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="12"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                                <!-- Camera Flash -->
                                                <Border Grid.Row="0" Grid.Column="0" Background="#F8FAFC" CornerRadius="8" Padding="12">
                                                    <StackPanel Orientation="Horizontal">
                                                        <StackPanel Margin="0,0,12,0">
                                                            <TextBlock Text="Camera Flash" FontSize="14" FontWeight="Medium" Foreground="#374151"/>
                                                            <TextBlock Text="LED flash for photos" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        <ToggleButton Name="CameraFlashToggle" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" IsChecked="True" HorizontalAlignment="Right"/>
                                                    </StackPanel>
                                                </Border>

                                                <!-- Maintenance Mode -->
                                                <Border Grid.Row="0" Grid.Column="2" Background="#F8FAFC" CornerRadius="8" Padding="12">
                                                    <StackPanel Orientation="Horizontal">
                                                        <StackPanel Margin="0,0,12,0">
                                                            <TextBlock Text="Maintenance Mode" FontSize="14" FontWeight="Medium" Foreground="#374151"/>
                                                            <TextBlock Text="Disable customer access" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        <ToggleButton Name="MaintenanceModeToggle" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" HorizontalAlignment="Right"/>
                                                    </StackPanel>
                                                </Border>

                                                <!-- RFID Detection -->
                                                <Border Grid.Row="2" Grid.Column="0" Background="#F8FAFC" CornerRadius="8" Padding="12">
                                                    <StackPanel Orientation="Horizontal">
                                                        <StackPanel Margin="0,0,12,0">
                                                            <TextBlock Text="RFID Detection" FontSize="14" FontWeight="Medium" Foreground="#374151"/>
                                                            <TextBlock Text="Auto-detect new paper rolls" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        <ToggleButton Name="RFIDDetectionToggle" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" IsChecked="True" HorizontalAlignment="Right"/>
                                                    </StackPanel>
                                                </Border>

                                                <!-- Seasonal Templates -->
                                                <Border Grid.Row="2" Grid.Column="2" Background="#F8FAFC" CornerRadius="8" Padding="12">
                                                    <StackPanel Orientation="Horizontal">
                                                        <StackPanel Margin="0,0,12,0">
                                                            <TextBlock Text="Seasonal Templates" FontSize="14" FontWeight="Medium" Foreground="#374151"/>
                                                            <TextBlock Text="Auto-enable by date" FontSize="12" Foreground="#6B7280"/>
                                                        </StackPanel>
                                                        <ToggleButton Name="SeasonalTemplatesToggle" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" IsChecked="True" HorizontalAlignment="Right"/>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </StackPanel>
                                    </Border>

                                </StackPanel>

                                <!-- Right Column: Sidebar (1/3 width) -->
                                <StackPanel Grid.Column="2" VerticalAlignment="Top">
                                    


                            <!-- Quick Actions Card -->
                                    <Border Style="{StaticResource ModernCardStyle}" Margin="0,0,0,24" Background="White" BorderThickness="0" CornerRadius="12">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                        </Border.Effect>
                                        <StackPanel Margin="24">
                                            <TextBlock Text="Quick Actions" FontSize="18" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,4"/>
                                    <TextBlock Text="System tools and tests" FontSize="14" Foreground="#64748B" Margin="0,0,0,16"/>
                                            
                                            <StackPanel>
                                                <Button Name="SettingsTestCameraButton" Margin="0,0,0,8" Height="44" Background="White" BorderBrush="#E5E7EB" BorderThickness="1" Cursor="Hand" Click="SettingsTestCameraButton_Click">
                                                    <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" 
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    CornerRadius="8" 
                                                                    Padding="12,0">
                                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                                    <TextBlock Text="📷" FontSize="16" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                                                    <TextBlock Text="Test Camera" FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                                                </StackPanel>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#F8FAFC"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                </Button>
                                                
                                                <Button Name="SettingsTestPrintButton" Margin="0,0,0,8" Height="44" Background="White" BorderBrush="#E5E7EB" BorderThickness="1" Cursor="Hand" Click="SettingsTestPrintButton_Click">
                                                    <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" 
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    CornerRadius="8" 
                                                                    Padding="12,0">
                                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                                    <TextBlock Text="🖨️" FontSize="16" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                                                    <TextBlock Text="Test Print" FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                                                </StackPanel>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#F8FAFC"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                </Button>
                                                
                                                <Button Name="SettingsAddFreeCreditButton" Margin="0,0,0,8" Height="44" Background="White" BorderBrush="#E5E7EB" BorderThickness="1" Cursor="Hand" Click="SettingsAddFreeCreditButton_Click">
                                                    <Button.Template>
                                                        <ControlTemplate TargetType="Button">
                                                            <Border Background="{TemplateBinding Background}" 
                                                                    BorderBrush="{TemplateBinding BorderBrush}"
                                                                    BorderThickness="{TemplateBinding BorderThickness}"
                                                                    CornerRadius="8" 
                                                                    Padding="12,0">
                                                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                                    <TextBlock Text="💰" FontSize="16" Margin="0,0,12,0" VerticalAlignment="Center"/>
                                                                    <TextBlock Text="Add Free Credit" FontSize="14" Foreground="#374151" VerticalAlignment="Center"/>
                                                                </StackPanel>
                                                            </Border>
                                                            <ControlTemplate.Triggers>
                                                                <Trigger Property="IsMouseOver" Value="True">
                                                                    <Setter Property="Background" Value="#F8FAFC"/>
                                                                </Trigger>
                                                            </ControlTemplate.Triggers>
                                                        </ControlTemplate>
                                                    </Button.Template>
                                                </Button>
                                            </StackPanel>
                                        </StackPanel>
                                    </Border>

                            <!-- Security Card -->
                                    <Border Style="{StaticResource ModernCardStyle}" Background="White" BorderThickness="0" CornerRadius="12">
                                        <Border.Effect>
                                            <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                        </Border.Effect>
                                        <StackPanel Margin="24">
                                            <TextBlock Text="Security &amp; Users" FontSize="18" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,4"/>
                                    <TextBlock Text="Password and user management" FontSize="14" Foreground="#64748B" Margin="0,0,0,16"/>
                                            
                                            <!-- Password Change Section -->
                                            <StackPanel Name="PasswordChangeSection" Margin="0,0,0,24">
                                                <Grid Margin="0,0,0,16">
                                                    <TextBlock Text="Change My Password" FontSize="16" FontWeight="Medium" Foreground="#374151" HorizontalAlignment="Left"/>
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                                        <Button Name="TogglePasswordFormButton" Content="Change" Background="Transparent" BorderThickness="0" FontSize="12" Foreground="#3B82F6" HorizontalAlignment="Right" Padding="0" Cursor="Hand" Click="TogglePasswordForm_Click"/>
                                    </StackPanel>
                                                </Grid>
                                                
                                                <!-- Password Change Form (Initially Hidden) -->
                                                <Border Name="PasswordChangeFormBorder" Visibility="Collapsed" Background="#F8FAFC" CornerRadius="8" Margin="0,8,0,0" Padding="16">
                                                    <Grid Name="PasswordChangeForm">
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                            <RowDefinition Height="Auto"/>
                                                        </Grid.RowDefinitions>
                                                        
                                                        <!-- Current Password -->
                                                        <StackPanel Grid.Row="0" Margin="0,0,0,12">
                                                            <TextBlock Text="Current Password" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                            <PasswordBox Name="CurrentPasswordBox" Height="36" FontSize="12" Padding="8,0" BorderBrush="#CBD5E1" BorderThickness="1" Background="White"
                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                    </StackPanel>
                                                        
                                                        <!-- New Password -->
                                                        <StackPanel Grid.Row="1" Margin="0,0,0,12">
                                                            <TextBlock Text="New Password" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                            <PasswordBox Name="NewPasswordBox" Height="36" FontSize="12" Padding="8,0" BorderBrush="#CBD5E1" BorderThickness="1" Background="White"
                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                                        </StackPanel>
                                                        
                                                        <!-- Confirm Password -->
                                                        <StackPanel Grid.Row="2" Margin="0,0,0,12">
                                                            <TextBlock Text="Confirm New Password" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                            <PasswordBox Name="ConfirmPasswordBox" Height="36" FontSize="12" Padding="8,0" BorderBrush="#CBD5E1" BorderThickness="1" Background="White"
                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                                        </StackPanel>
                                                        
                                                        <!-- Error Message -->
                                                        <TextBlock Name="PasswordErrorMessage" Grid.Row="3" Text="" FontSize="11" Foreground="#DC2626" Margin="0,0,0,12" Visibility="Collapsed"/>
                                                        
                                                        <!-- Action Buttons -->
                                                        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
                                                            <Button Name="CancelPasswordChangeButton" Content="Cancel" Height="32" Padding="12,0" Margin="0,0,8,0" Background="White" BorderBrush="#E2E8F0" BorderThickness="1" Foreground="#64748B" FontSize="12" Click="CancelPasswordChange_Click"/>
                                                            <Button Name="SavePasswordButton" Content="Update Password" Height="32" Padding="12,0" Background="#3B82F6" BorderThickness="0" Foreground="White" FontSize="12" FontWeight="Medium" Click="SavePassword_Click"/>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </StackPanel>

                                            <!-- User Management Section (Admin Only) -->
                                            <StackPanel Name="UserManagementSection" Visibility="Visible">
                                                <Border BorderBrush="#E5E7EB" BorderThickness="0,1,0,0" Padding="0,16,0,0">
                                    <StackPanel>
                                                        <Grid Margin="0,0,0,16">
                                                            <TextBlock Text="User Management" FontSize="16" FontWeight="Medium" Foreground="#374151" HorizontalAlignment="Left"/>
                                                            <Button Name="AddNewUserButton" Content="+ Add User" Background="#10B981" BorderThickness="0" FontSize="12" Foreground="White" HorizontalAlignment="Right" Padding="8,4" Cursor="Hand" Click="AddNewUser_Click">
                                                                <Button.Template>
                                                                    <ControlTemplate TargetType="Button">
                                                                        <Border Background="{TemplateBinding Background}" 
                                                                                BorderBrush="{TemplateBinding BorderBrush}"
                                                                                BorderThickness="{TemplateBinding BorderThickness}"
                                                                                CornerRadius="4" 
                                                                                Padding="{TemplateBinding Padding}">
                                                                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                        </Border>
                                                                        <ControlTemplate.Triggers>
                                                                            <Trigger Property="IsMouseOver" Value="True">
                                                                                <Setter Property="Background" Value="#059669"/>
                                                                            </Trigger>
                                                                        </ControlTemplate.Triggers>
                                                                    </ControlTemplate>
                                                                </Button.Template>
                                                            </Button>
                                                        </Grid>
                                                        
                                                        <!-- Add User Form (Initially Hidden) -->
                                                        <Border Name="AddUserFormBorder" Visibility="Collapsed" Background="#F0FDF4" CornerRadius="8" Margin="0,8,0,16" Padding="16">
                                                            <Grid Name="AddUserForm">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="Auto"/>
                                                                    <RowDefinition Height="Auto"/>
                                                                    <RowDefinition Height="Auto"/>
                                                                    <RowDefinition Height="Auto"/>
                                                                    <RowDefinition Height="Auto"/>
                                                                    <RowDefinition Height="Auto"/>
                                                                    <RowDefinition Height="Auto"/>
                                                                </Grid.RowDefinitions>
                                                                
                                                                <TextBlock Grid.Row="0" Text="Add New User" FontSize="14" FontWeight="Medium" Foreground="#047857" Margin="0,0,0,12"/>
                                                                
                                                                <!-- Username -->
                                                                <StackPanel Grid.Row="1" Margin="0,0,0,12">
                                                                    <TextBlock Text="Username" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                                    <TextBox Name="NewUsernameBox" Height="36" FontSize="12" Padding="8,8" BorderBrush="#CBD5E1" BorderThickness="1" Background="White"
                                         behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                    </StackPanel>
                                                                
                                                                <!-- Display Name -->
                                                                <StackPanel Grid.Row="2" Margin="0,0,0,12">
                                                                    <TextBlock Text="Full Name" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                                    <TextBox Name="NewDisplayNameBox" Height="36" FontSize="12" Padding="8,8" BorderBrush="#CBD5E1" BorderThickness="1" Background="White"
                                         behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                </StackPanel>
                                                                
                                                                <!-- Password -->
                                                                <StackPanel Grid.Row="3" Margin="0,0,0,12">
                                                                    <TextBlock Text="Password" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                                    <PasswordBox Name="NewUserPasswordBox" Height="36" FontSize="12" Padding="8,8" BorderBrush="#CBD5E1" BorderThickness="1" Background="White"
                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                                                </StackPanel>
                                                                
                                                                <!-- Access Level -->
                                                                <StackPanel Grid.Row="4" Margin="0,0,0,12">
                                                                    <TextBlock Text="Access Level" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                                                    <StackPanel Orientation="Horizontal">
                                                                        <RadioButton Name="NewUserAccessAdminRadio" Content="Admin" GroupName="NewUserAccess" FontSize="12" Foreground="#374151" Margin="0,0,16,0"/>
                                                                        <RadioButton Name="NewUserAccessUserRadio" Content="User" GroupName="NewUserAccess" FontSize="12" Foreground="#374151" IsChecked="True"/>
                                                                    </StackPanel>
                                                                </StackPanel>
                                                                
                                                                <!-- Error Message -->
                                                                <TextBlock Name="AddUserErrorMessage" Grid.Row="5" Text="" FontSize="11" Foreground="#DC2626" Margin="0,0,0,12" Visibility="Collapsed"/>
                                                                
                                                                <!-- Action Buttons -->
                                                                <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right">
                                                                    <Button Name="CancelAddUserButton" Content="Cancel" Height="32" Padding="12,0" Margin="0,0,8,0" Background="White" BorderBrush="#E2E8F0" BorderThickness="1" Foreground="#64748B" FontSize="12" Click="CancelAddUser_Click"/>
                                                                    <Button Name="SaveNewUserButton" Content="Create User" Height="32" Padding="12,0" Background="#10B981" BorderThickness="0" Foreground="White" FontSize="12" FontWeight="Medium" Click="SaveNewUser_Click"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                        
                                                        <!-- Existing Users List -->
                                    <StackPanel Margin="0,16,0,0">
                                                            <Grid Margin="0,0,0,12">
                                                                <TextBlock Text="Existing Users" FontSize="14" FontWeight="Medium" Foreground="#374151" HorizontalAlignment="Left"/>
                                                                <Button Name="RefreshUsersButton" Content="🔄 Refresh" Background="Transparent" BorderThickness="0" FontSize="12" Foreground="#3B82F6" HorizontalAlignment="Right" Padding="4,0" Cursor="Hand" Click="RefreshUsers_Click"/>
                                                            </Grid>
                                                            
                                                            <!-- User List Container -->
                                                            <Border Background="#F8FAFC" CornerRadius="8" Padding="12" MinHeight="120">
                                                                <ScrollViewer Name="UserListScrollViewer" VerticalScrollBarVisibility="Auto" MaxHeight="200">
                                                                    <StackPanel Name="UserListContainer">
                                                                        <!-- Users will be populated dynamically -->
                                                                        <TextBlock Name="NoUsersMessage" Text="Loading users..." FontSize="12" Foreground="#6B7280" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                                    </StackPanel>
                                                                </ScrollViewer>
                                                            </Border>
                                                        </StackPanel>
                                                    </StackPanel>
                                                </Border>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                            </Grid>
                        </Grid>
                    </Grid>

                    <!-- Products Tab Content -->
                    <Grid Name="ProductsTabContent" Visibility="Collapsed">
                            <StackPanel Margin="0,0,0,32">
                                
                                <!-- Header Section -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,24">

                                    <StackPanel>
                                        <TextBlock Text="Product Configuration" FontSize="32" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,8"/>
                                        <TextBlock Text="Enable/disable products and configure availability" FontSize="16" Foreground="#64748B"/>

                                    </StackPanel>
                                </StackPanel>

                                <!-- Product Configuration Cards -->
                                <ItemsControl Name="ProductsItemsControl" Margin="0,0,0,32">
                                    <ItemsControl.ItemsPanel>
                                        <ItemsPanelTemplate>
                                            <UniformGrid Columns="3"/>
                                        </ItemsPanelTemplate>
                                    </ItemsControl.ItemsPanel>
                                    
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate>
                                            <Border Background="#F8FAFC" 
                                                    CornerRadius="12" 
                                                    BorderBrush="#E5E7EB" 
                                                    BorderThickness="1" 
                                                    Padding="20" 
                                                    Margin="8"
                                                    Opacity="{Binding CardOpacity}">
                                                <StackPanel>
                                                    <!-- Header -->
                                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                                        <Border Width="36" Height="36" 
                                                                Background="{Binding IconBackground}" 
                                                                CornerRadius="8" 
                                                                Margin="0,0,12,0">
                                                            <TextBlock Text="{Binding Icon}" 
                                                                       FontSize="18" 
                                                                       HorizontalAlignment="Center" 
                                                                       VerticalAlignment="Center"/>
                                                        </Border>
                                                        <StackPanel>
                                                            <TextBlock Text="{Binding Name}" 
                                                                       FontSize="16" 
                                                                       FontWeight="SemiBold" 
                                                                       Foreground="#374151"/>
                                                            <TextBlock Text="{Binding Description}" 
                                                                       FontSize="12" 
                                                                       Foreground="#6B7280"/>
                                                        </StackPanel>
                                                    </StackPanel>

                                                    <!-- Enable/Disable Toggle -->
                                                    <Grid Margin="0,0,0,16">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Grid.Column="0" 
                                                                   Text="Enable Product" 
                                                                   FontSize="14" 
                                                                   FontWeight="Medium" 
                                                                   Foreground="#374151" 
                                                                   VerticalAlignment="Center"/>
                                                        <ToggleButton Grid.Column="1" 
                                                                      Style="{StaticResource ModernToggleSwitchStyle}" 
                                                                      IsChecked="{Binding IsEnabled}"
                                                                      Tag="{Binding ProductKey}"/>
                                                    </Grid>

                                                    <!-- Price Configuration -->
                                                    <StackPanel IsEnabled="{Binding PriceSectionEnabled}">
                                                        <TextBlock Text="{Binding PriceLabel}" 
                                                                   FontSize="12" 
                                                                   FontWeight="Medium" 
                                                                   Foreground="#6B7280" 
                                                                   Margin="0,0,0,4"/>
                                                        <Border Background="White" 
                                                                CornerRadius="6" 
                                                                BorderBrush="#D1D5DB" 
                                                                BorderThickness="1" 
                                                                Padding="12,8">
                                                            <Grid>
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="*"/>
                                                                </Grid.ColumnDefinitions>
                                                                <TextBlock Grid.Column="0" 
                                                                           Text="$" 
                                                                           FontSize="14" 
                                                                           Foreground="#6B7280" 
                                                                           VerticalAlignment="Center" 
                                                                           Margin="0,0,4,0"/>
                                                                <TextBox Grid.Column="1" 
                                                                         Text="{Binding PriceText, UpdateSourceTrigger=LostFocus}" 
                                                                         FontSize="14" 
                                                                         BorderThickness="0" 
                                                                         Background="Transparent" 
                                                                         VerticalAlignment="Center"
                                                                         Tag="{Binding ProductKey}"
                                                                         behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                                            </Grid>
                                                        </Border>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Border>
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                                <!-- Photobooth Mode Section -->
                                <Border Background="White" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                            <Border Width="36" Height="36" Background="#F3E8FF" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="⚙️" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Photobooth Mode" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                                <TextBlock Text="Choose how customers pay for photos" FontSize="14" Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Mode Selection -->
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="32"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <!-- Coin Operated Mode -->
                                            <Border Name="ProductCoinOperatedCard" Grid.Column="0" Background="#F8FAFC" CornerRadius="8" BorderBrush="#3B82F6" BorderThickness="2" Padding="16" Cursor="Hand" MouseLeftButtonDown="ModeCard_Click">
                                                <StackPanel>
                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Border Grid.Column="0" Width="24" Height="24" Background="#DBEAFE" CornerRadius="12" Margin="0,0,8,0">
                                                            <TextBlock Text="💰" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <TextBlock Grid.Column="1" Text="Coin Operated" FontSize="14" FontWeight="SemiBold" Foreground="#374151" VerticalAlignment="Center"/>
                                                        <RadioButton Name="ProductCoinOperatedRadio" Grid.Column="2" IsChecked="True" GroupName="ProductOperationMode" VerticalAlignment="Center"/>
                                                    </Grid>
                                                    <TextBlock Text="Customers must insert money to use the photobooth" FontSize="12" Foreground="#6B7280" TextWrapping="Wrap"/>
                                                </StackPanel>
                                            </Border>

                                            <!-- Free Play Mode -->
                                            <Border Name="ProductFreePlayCard" Grid.Column="2" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E5E7EB" BorderThickness="1" Padding="16" Cursor="Hand" MouseLeftButtonDown="ModeCard_Click">
                                                <StackPanel>
                                                    <Grid Margin="0,0,0,12">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Border Grid.Column="0" Width="24" Height="24" Background="#FEF3C7" CornerRadius="12" Margin="0,0,8,0">
                                                            <TextBlock Text="🎉" FontSize="12" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Border>
                                                        <TextBlock Grid.Column="1" Text="Free Play Mode" FontSize="14" FontWeight="SemiBold" Foreground="#374151" VerticalAlignment="Center"/>
                                                        <RadioButton Name="ProductFreePlayRadio" Grid.Column="2" GroupName="ProductOperationMode" VerticalAlignment="Center"/>
                                                    </Grid>
                                                    <TextBlock Text="Photos are free for customers (no payment required)" FontSize="12" Foreground="#6B7280" TextWrapping="Wrap"/>
                                                </StackPanel>
                                            </Border>
                                        </Grid>
                                    </StackPanel>
                                </Border>

                                <!-- Extra Copy Pricing Configuration -->
                                <Border Background="White" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                            <Border Width="36" Height="36" Background="#FEF3C7" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="📋" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Extra Copy Pricing" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                                <TextBlock Text="Configure pricing for additional photo copies" FontSize="14" Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Custom Pricing Toggle -->
                                        <Border Background="#F8FAFC" CornerRadius="8" BorderBrush="#E5E7EB" BorderThickness="1" Padding="16" Margin="0,0,0,20">
                                            <StackPanel>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Custom Extra Copy Pricing" FontSize="14" FontWeight="SemiBold" Foreground="#374151"/>
                                                        <TextBlock Name="CustomPricingDescription" Text="By default, extra copies cost the same as the base product price" FontSize="12" Foreground="#6B7280" Margin="0,2,0,0"/>
                                                    </StackPanel>
                                                    <CheckBox Name="UseCustomExtraCopyPricingCheckBox" Grid.Column="1" VerticalAlignment="Center" Checked="UseCustomPricing_Checked" Unchecked="UseCustomPricing_Unchecked"/>
                                                </Grid>
                                            </StackPanel>
                                        </Border>

                                        <!-- Custom Pricing Section (shown when toggle is enabled) -->
                                        <StackPanel Name="CustomPricingSection" Visibility="Collapsed">
                                            <!-- Product-Specific Pricing Sections -->
                                            
                                            <!-- Photo Strips Pricing -->
                                            <Border Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16" Margin="0,0,0,16">
                                                <StackPanel>
                                                    <TextBlock Text="📸 Photo Strips Pricing" FontSize="16" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,12"/>
                                                    <TextBlock x:Name="PhotoStripsBasePriceText" Text="Pricing for Photo Strips extra copies (Base: $6.00)" FontSize="12" Foreground="#64748B" Margin="0,0,0,16"/>
                                                    
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="16"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Strips Extra Copy Price -->
                                                        <Border Grid.Column="0" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12">
                                                            <StackPanel>
                                                                <TextBlock Text="Extra Copy Price" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,4"/>
                                                                <TextBlock Text="Price per additional copy" FontSize="10" Foreground="#6B7280" Margin="0,0,0,8"/>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0" Text="$" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                                                    <TextBox Grid.Column="1" Name="StripsExtraCopyPriceInput" Text="6.00" 
                                                                             FontSize="12" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" TextChanged="ExtraCopyPrice_TextChanged"/>
                                                                </Grid>
                                                            </StackPanel>
                                                        </Border>

                                                        <!-- Strips Multiple Copy Discount -->
                                                        <Border Grid.Column="2" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12">
                                                            <StackPanel>
                                                                <TextBlock Text="Multiple Copy Discount" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,4"/>
                                                                <TextBlock Text="Discount % for 2+ copies" FontSize="10" Foreground="#6B7280" Margin="0,0,0,8"/>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBox Grid.Column="0" Name="StripsMultipleCopyDiscountInput" Text="0" 
                                                                             FontSize="12" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" TextChanged="MultipleCopyDiscount_TextChanged"/>
                                                                    <TextBlock Grid.Column="1" Text="%" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="4,0,0,0"/>
                                                                </Grid>
                                                            </StackPanel>
                                                        </Border>
                                                    </Grid>
                                                </StackPanel>
                                            </Border>

                                            <!-- 4x6 Photos Pricing -->
                                            <Border Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16" Margin="0,0,0,16">
                                                <StackPanel>
                                                    <TextBlock Text="🖼️ 4x6 Photos Pricing" FontSize="16" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,12"/>
                                                    <TextBlock x:Name="Photo4x6BasePriceText" Text="Pricing for 4x6 Photos extra copies (Base: $6.00)" FontSize="12" Foreground="#64748B" Margin="0,0,0,36"/>
                                                    
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="16"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- 4x6 Extra Copy Price -->
                                                        <Border Grid.Column="0" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12">
                                                            <StackPanel>
                                                                <TextBlock Text="Extra Copy Price" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,4"/>
                                                                <TextBlock Text="Price per additional copy" FontSize="10" Foreground="#6B7280" Margin="0,0,0,8"/>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0" Text="$" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                                                    <TextBox Grid.Column="1" Name="Photo4x6ExtraCopyPriceInput" Text="5.00" 
                                                                             FontSize="12" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" TextChanged="ExtraCopyPrice_TextChanged"/>
                                                                </Grid>
                                                            </StackPanel>
                                                        </Border>

                                                        <!-- 4x6 Multiple Copy Discount -->
                                                        <Border Grid.Column="2" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12">
                                                            <StackPanel>
                                                                <TextBlock Text="Multiple Copy Discount" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,4"/>
                                                                <TextBlock Text="Discount % for 2+ copies" FontSize="10" Foreground="#6B7280" Margin="0,0,0,8"/>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBox Grid.Column="0" Name="Photo4x6MultipleCopyDiscountInput" Text="0" 
                                                                             FontSize="12" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" TextChanged="MultipleCopyDiscount_TextChanged"/>
                                                                    <TextBlock Grid.Column="1" Text="%" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="4,0,0,0"/>
                                                                </Grid>
                                                            </StackPanel>
                                                        </Border>
                                                    </Grid>
                                                </StackPanel>
                                            </Border>

                                            <!-- Smartphone Print Pricing -->
                                            <Border Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16" Margin="0,0,0,16">
                                                <StackPanel>
                                                    <TextBlock Text="📱 Smartphone Print Pricing" FontSize="16" FontWeight="SemiBold" Foreground="#1E293B" Margin="0,0,0,12"/>
                                                    <TextBlock x:Name="SmartphoneBasePriceText" Text="Pricing for Smartphone Print extra copies (Base: $6.00)" FontSize="12" Foreground="#64748B" Margin="0,0,0,16"/>
                                                    
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="16"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Smartphone Extra Copy Price -->
                                                        <Border Grid.Column="0" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12">
                                                            <StackPanel>
                                                                <TextBlock Text="Extra Copy Price" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,4"/>
                                                                <TextBlock Text="Price per additional copy" FontSize="10" Foreground="#6B7280" Margin="0,0,0,8"/>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                        <ColumnDefinition Width="*"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBlock Grid.Column="0" Text="$" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                                                    <TextBox Grid.Column="1" Name="SmartphoneExtraCopyPriceInput" Text="3.00" 
                                                                             FontSize="12" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" TextChanged="ExtraCopyPrice_TextChanged"
                                                                             GotFocus="SmartphoneInput_GotFocus" LostFocus="SmartphoneInput_LostFocus"/>
                                                                </Grid>
                                                            </StackPanel>
                                                        </Border>

                                                        <!-- Smartphone Multiple Copy Discount -->
                                                        <Border Grid.Column="2" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12">
                                                            <StackPanel>
                                                                <TextBlock Text="Multiple Copy Discount" FontSize="12" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,4"/>
                                                                <TextBlock Text="Discount % for 2+ copies" FontSize="10" Foreground="#6B7280" Margin="0,0,0,8"/>
                                                                <Grid>
                                                                    <Grid.ColumnDefinitions>
                                                                        <ColumnDefinition Width="*"/>
                                                                        <ColumnDefinition Width="Auto"/>
                                                                    </Grid.ColumnDefinitions>
                                                                    <TextBox Grid.Column="0" Name="SmartphoneMultipleCopyDiscountInput" Text="0" 
                                                                             FontSize="12" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                             behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True" TextChanged="MultipleCopyDiscount_TextChanged"
                                                                             GotFocus="SmartphoneInput_GotFocus" LostFocus="SmartphoneInput_LostFocus"/>
                                                                    <TextBlock Grid.Column="1" Text="%" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="4,0,0,0"/>
                                                                </Grid>
                                                            </StackPanel>
                                                        </Border>
                                                    </Grid>
                                                </StackPanel>
                                            </Border>


                                        </StackPanel>
                                    </StackPanel>
                                </Border>

                                <!-- Save Button with Status Text Below -->
                                <StackPanel HorizontalAlignment="Center">
                                    <Border Name="SaveButtonBorder" Background="#3B82F6" CornerRadius="8" Padding="0" Margin="0">
                                    <Button Name="SaveProductConfigButton" Background="Transparent" Foreground="White" FontSize="14" FontWeight="SemiBold" 
                                            Height="48" BorderThickness="0" Cursor="Hand" Click="SaveProductConfig_Click" Padding="32,0">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="💾" FontSize="16" Margin="0,0,8,0"/>
                                                <TextBlock Name="SaveButtonText" Text="Save Configuration"/>
                                        </StackPanel>
                                    </Button>
                                </Border>
                                    <TextBlock Name="UnsavedChangesIndicator" Text="Unsaved changes" FontSize="12" 
                                               Foreground="#F59E0B" HorizontalAlignment="Center" Margin="0,4,0,0" Visibility="Collapsed"/>
                                </StackPanel>

                            </StackPanel>
                    </Grid>

                    <!-- Templates Tab Content -->
                    <Grid Name="TemplatesTabContent" Visibility="Visible">
                        <!-- TemplatesTabControl will be added programmatically -->
                    </Grid>

                    <!-- Diagnostics Tab Content -->
                    <Grid Name="DiagnosticsTabContent" Visibility="Collapsed">
                        <StackPanel Margin="0,0,0,32">
                            
                            <!-- Header Section -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                                <StackPanel>
                                    <TextBlock Text="System Diagnostics" FontSize="32" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,8"/>
                                    <TextBlock Text="Test hardware components and monitor system health" FontSize="16" Foreground="#64748B"/>
                                </StackPanel>
                            </StackPanel>
                                
                            <!-- Hardware Status Cards -->
                            <UniformGrid Columns="3" Margin="0,0,0,32">
                                <!-- Camera Status Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Border Width="36" Height="36" 
                                                    Background="#DBEAFE" 
                                                    CornerRadius="8" 
                                                    Margin="0,0,12,0">
                                                <TextBlock Text="📷" 
                                                           FontSize="18" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Camera" 
                                                           FontSize="16" 
                                                           FontWeight="SemiBold" 
                                                           Foreground="#374151"/>
                                                <TextBlock Text="Video capture device" 
                                                           FontSize="12" 
                                                           Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Status -->
                                        <Border Name="CameraStatusIndicator" 
                                              Width="80" Height="24" CornerRadius="12" 
                                              Background="#FEF2F2" BorderBrush="#DC2626" BorderThickness="1"
                                              HorizontalAlignment="Left" Margin="0,0,0,8">
                                            <TextBlock Name="CameraStatusText" Text="Inactive" FontSize="11" 
                                                     HorizontalAlignment="Center" VerticalAlignment="Center" 
                                                     Foreground="#991B1B" FontWeight="Medium"/>
                                        </Border>
                                        <TextBlock Name="CameraStatusMessage" Text="No camera detected" 
                                                 FontSize="12" Foreground="#64748B" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>

                                <!-- Printer Status Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Border Width="36" Height="36" 
                                                    Background="#FEF3C7" 
                                                    CornerRadius="8" 
                                                    Margin="0,0,12,0">
                                                <TextBlock Text="🖨️" 
                                                           FontSize="18" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Printer" 
                                                           FontSize="16" 
                                                           FontWeight="SemiBold" 
                                                           Foreground="#374151"/>
                                                <TextBlock Text="Photo printer (DNP RX1hs)" 
                                                           FontSize="12" 
                                                           Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Status -->
                                        <Border Name="PrinterStatusIndicator" 
                                              Width="80" Height="24" CornerRadius="12" 
                                              Background="#FEF2F2" BorderBrush="#DC2626" BorderThickness="1"
                                              HorizontalAlignment="Left" Margin="0,0,0,8">
                                            <TextBlock Name="PrinterStatusText" Text="Error" FontSize="11" 
                                                     HorizontalAlignment="Center" VerticalAlignment="Center" 
                                                     Foreground="#991B1B" FontWeight="Medium"/>
                                        </Border>
                                        <TextBlock Name="PrinterStatusMessage" Text="No printer detected" 
                                                 FontSize="12" Foreground="#64748B" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>

                                <!-- Arduino Status Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Border Width="36" Height="36" 
                                                    Background="#D1FAE5" 
                                                    CornerRadius="8" 
                                                    Margin="0,0,12,0">
                                                <TextBlock Text="🔌" 
                                                           FontSize="18" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Arduino" 
                                                           FontSize="16" 
                                                           FontWeight="SemiBold" 
                                                           Foreground="#374151"/>
                                                <TextBlock Text="Payment controller" 
                                                           FontSize="12" 
                                                           Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Status -->
                                        <Border Name="ArduinoStatusIndicator" 
                                              Width="80" Height="24" CornerRadius="12" 
                                              Background="#FEF2F2" BorderBrush="#DC2626" BorderThickness="1"
                                              HorizontalAlignment="Left" Margin="0,0,0,8">
                                            <TextBlock Name="ArduinoStatusText" Text="Error" FontSize="11" 
                                                     HorizontalAlignment="Center" VerticalAlignment="Center" 
                                                     Foreground="#991B1B" FontWeight="Medium"/>
                                        </Border>
                                        <TextBlock Name="ArduinoStatusMessage" Text="No serial connection" 
                                                 FontSize="12" Foreground="#64748B" TextWrapping="Wrap"/>
                                    </StackPanel>
                                </Border>
                            </UniformGrid>
                                
                            <!-- Camera Testing Card -->
                            <Border Background="#F8FAFC" 
                                    CornerRadius="12" 
                                    BorderBrush="#E5E7EB" 
                                    BorderThickness="1" 
                                    Padding="24" 
                                    Margin="8,0,8,16">
                                <StackPanel>
                                    <!-- Header -->
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Width="40" Height="40" 
                                                Background="#DBEAFE" 
                                                CornerRadius="10" 
                                                Margin="0,0,16,0">
                                            <TextBlock Text="📷" 
                                                       FontSize="20" 
                                                       HorizontalAlignment="Center" 
                                                       VerticalAlignment="Center"/>
                                        </Border>
                                        <StackPanel>
                                            <TextBlock Text="Camera Testing" 
                                                       FontSize="20" 
                                                       FontWeight="SemiBold" 
                                                       Foreground="#374151"/>
                                            <TextBlock Text="Test camera functionality and adjust settings" 
                                                       FontSize="14" 
                                                       Foreground="#6B7280"/>
                                        </StackPanel>
                                    </StackPanel>
                                        
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="320"/>
                                        </Grid.ColumnDefinitions>
                                        
                                        <!-- Camera Preview Area -->
                                        <Border Grid.Column="0" BorderBrush="#E2E8F0" BorderThickness="2" 
                                              CornerRadius="8" Margin="0,0,20,0" Height="240">
                                            <Grid>
                                                <Rectangle Name="CameraPreviewBackground" Fill="#FFFFFF"/>
                                                <Image Name="CameraPreviewImage" 
                                                       Stretch="Uniform"
                                                       RenderTransformOrigin="0.5,0.5">
                                                    <Image.RenderTransform>
                                                        <ScaleTransform ScaleX="-1" ScaleY="1"/>
                                                    </Image.RenderTransform>
                                                </Image>
                                                <TextBlock Name="CameraPreviewPlaceholder" Text="Camera preview will appear here" 
                                                         HorizontalAlignment="Center" VerticalAlignment="Center" 
                                                         Foreground="#9CA3AF" FontSize="14"/>
                                            </Grid>
                                        </Border>
                                            
                                        <!-- Camera Controls -->
                                        <StackPanel Grid.Column="1">
                                            <Button Name="TestCameraButton" Content="▶ Start Camera" 
                                                  Style="{StaticResource ModernButtonStyle}" 
                                                  Background="#0284C7" Foreground="White"
                                                  Margin="0,0,0,12" Click="TestCameraButton_Click"/>
                                            
                                            <Button Name="StopCameraButton" Content="⏹ Stop Camera" 
                                                  Style="{StaticResource ModernButtonStyle}" 
                                                  Background="#64748B" Foreground="White" Margin="0,0,0,20" 
                                                  IsEnabled="False" Click="StopCameraButton_Click"/>
                                            
                                            <!-- Camera Settings -->
                                            <TextBlock Text="Camera Settings" FontWeight="SemiBold" FontSize="14" Margin="0,0,0,12"/>
                                                
                                            <!-- Brightness Control -->
                                            <StackPanel Margin="0,0,0,12">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="80"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="Brightness" VerticalAlignment="Center" FontSize="12"/>
                                                    <Slider Grid.Column="1" Name="BrightnessSlider" Minimum="0" Maximum="100" Value="50" 
                                                          TickFrequency="10" IsSnapToTickEnabled="True" 
                                                          ValueChanged="BrightnessSlider_ValueChanged" Margin="8,0"/>
                                                    <TextBlock Grid.Column="2" Name="BrightnessValue" Text="50" 
                                                             VerticalAlignment="Center" FontSize="12" TextAlignment="Right"/>
                                                </Grid>
                                            </StackPanel>
                                            
                                            <!-- Zoom Control -->
                                            <StackPanel Margin="0,0,0,12">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="80"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="Zoom" VerticalAlignment="Center" FontSize="12"/>
                                                    <Slider Grid.Column="1" Name="ZoomSlider" Minimum="100" Maximum="300" Value="100" 
                                                          TickFrequency="25" IsSnapToTickEnabled="True" 
                                                          ValueChanged="ZoomSlider_ValueChanged" Margin="8,0"/>
                                                    <TextBlock Grid.Column="2" Name="ZoomValue" Text="100%" 
                                                             VerticalAlignment="Center" FontSize="12" TextAlignment="Right"/>
                                                </Grid>
                                            </StackPanel>
                                            
                                            <!-- Contrast Control -->
                                            <StackPanel Margin="0,0,0,16">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="80"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="40"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="Contrast" VerticalAlignment="Center" FontSize="12"/>
                                                    <Slider Grid.Column="1" Name="ContrastSlider" Minimum="0" Maximum="100" Value="50" 
                                                          TickFrequency="10" IsSnapToTickEnabled="True" 
                                                          ValueChanged="ContrastSlider_ValueChanged" Margin="8,0"/>
                                                    <TextBlock Grid.Column="2" Name="ContrastValue" Text="50" 
                                                             VerticalAlignment="Center" FontSize="12" TextAlignment="Right"/>
                                                </Grid>
                                            </StackPanel>
                                                
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="8"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <Button Grid.Column="0" Name="SaveCameraSettingsButton" Content="💾 Save" 
                                                      Background="#059669" Foreground="White" 
                                                      Style="{StaticResource ModernButtonStyle}" 
                                                      Click="SaveCameraSettingsButton_Click"/>
                                                
                                                <Button Grid.Column="2" Name="ResetCameraSettingsButton" Content="Reset" 
                                                      Background="#64748B" Foreground="White" 
                                                      Style="{StaticResource ModernButtonStyle}" 
                                                      Click="ResetCameraSettingsButton_Click"/>
                                            </Grid>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                                
                            <!-- Hardware Testing Cards -->
                            <UniformGrid Columns="2" Margin="0,0,0,16">
                                <!-- Printer Testing Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Border Width="32" Height="32" 
                                                    Background="#FEF3C7" 
                                                    CornerRadius="6" 
                                                    Margin="0,0,12,0">
                                                <TextBlock Text="🖨️" 
                                                           FontSize="16" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Printer Testing" 
                                                           FontSize="16" 
                                                           FontWeight="SemiBold" 
                                                           Foreground="#374151"/>
                                                <TextBlock Text="Test print functions" 
                                                           FontSize="12" 
                                                           Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Printer Info -->
                                        <Grid Margin="0,0,0,16">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Status:" FontSize="12" FontWeight="Medium" Margin="0,0,8,4"/>
                                            <TextBlock Grid.Row="0" Grid.Column="1" Name="PrinterStatusDetailsText" Text="Unknown" FontSize="12" Margin="0,0,0,4"/>
                                            
                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Paper:" FontSize="12" FontWeight="Medium" Margin="0,0,8,4"/>
                                            <TextBlock Grid.Row="1" Grid.Column="1" Name="PrinterPaperLevelText" Text="Unknown" FontSize="12" Margin="0,0,0,4"/>
                                            
                                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Error:" FontSize="12" FontWeight="Medium" Margin="0,0,8,0"/>
                                            <TextBlock Grid.Row="2" Grid.Column="1" Name="PrinterLastErrorText" Text="None" FontSize="12"/>
                                        </Grid>
                                            
                                        <!-- Printer Controls -->
                                        <StackPanel>
                                            <Button Name="TestPrinterButton" Content="Test Connection" 
                                                  Style="{StaticResource ModernButtonStyle}" 
                                                  Background="#0284C7" Foreground="White" FontSize="12"
                                                  Margin="0,0,0,8" Click="TestPrinterButton_Click"/>
                                            
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="8"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <Button Grid.Column="0" Name="PrintTestPageButton" Content="Test Page" 
                                                      Style="{StaticResource ModernButtonStyle}" 
                                                      Background="#059669" Foreground="White" FontSize="12"
                                                      Click="PrintTestPageButton_Click"/>
                                                
                                                <Button Grid.Column="2" Name="CheckPrinterStatusButton" Content="Status" 
                                                      Style="{StaticResource ModernButtonStyle}" 
                                                      Background="#64748B" Foreground="White" FontSize="12"
                                                      Click="CheckPrinterStatusButton_Click"/>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Arduino Testing Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Border Width="32" Height="32" 
                                                    Background="#D1FAE5" 
                                                    CornerRadius="6" 
                                                    Margin="0,0,12,0">
                                                <TextBlock Text="🔌" 
                                                           FontSize="16" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Arduino Testing" 
                                                           FontSize="16" 
                                                           FontWeight="SemiBold" 
                                                           Foreground="#374151"/>
                                                <TextBlock Text="Payment controller" 
                                                           FontSize="12" 
                                                           Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Arduino Info -->
                                        <Grid Margin="0,0,0,16">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Port:" FontSize="12" FontWeight="Medium" Margin="0,0,8,4"/>
                                            <TextBlock Grid.Row="0" Grid.Column="1" Name="ArduinoPortText" Text="COM5" FontSize="12" Margin="0,0,0,4"/>
                                            
                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Pulse:" FontSize="12" FontWeight="Medium" Margin="0,0,8,0"/>
                                            <TextBlock Grid.Row="1" Grid.Column="1" Name="ArduinoLastPulseText" Text="None" FontSize="12"/>
                                        </Grid>
                                        
                                        <!-- Arduino Controls -->
                                        <StackPanel>
                                            <Button Name="TestArduinoButton" Content="Test Connection" 
                                                  Style="{StaticResource ModernButtonStyle}" 
                                                  Background="#0284C7" Foreground="White" FontSize="12"
                                                  Margin="0,0,0,8" Click="TestArduinoButton_Click"/>

                                            <!-- Pulse Monitor Controls - Full Width Buttons -->
                                            <Grid Margin="0,8,0,0">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="8"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <Button Grid.Column="0" Name="StartPulseMonitorButton" Content="Start Monitor"
                                                        Style="{StaticResource ModernButtonStyle}"
                                                        Background="#4338CA" Foreground="White" FontSize="11"
                                                        Click="StartPulseMonitorButton_Click"/>

                                                <Button Grid.Column="2" Name="StopPulseMonitorButton" Content="Stop Monitor"
                                                        Style="{StaticResource ModernButtonStyle}"
                                                        Background="#9CA3AF" Foreground="White" FontSize="11"
                                                        Click="StopPulseMonitorButton_Click"/>

                                                <!-- DEV/TEST ONLY: Clear All Unique IDs button - Commented out for production use -->
                                                <!-- This button allows deletion of all processed pulse unique IDs from the database -->
                                                <!-- WARNING: This is a destructive operation that will reset duplicate detection -->
                                                <!-- Uncomment only for development/testing purposes -->
                                                <!--
                                                <Button Name="ClearPulseUniqueIdsButton" Content="Clear All Unique IDs"
                                                        Style="{StaticResource ModernButtonStyle}"
                                                        Background="#DC2626" Foreground="White" FontSize="11"
                                                        ToolTip="⚠️ DEV/TEST ONLY: Delete all processed pulse unique IDs from database. This will reset duplicate detection and allow previously processed pulses to be re-credited. Use with extreme caution!"
                                                        Click="ClearPulseUniqueIdsButton_Click"/>
                                                -->
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                            </UniformGrid>
                                
                            <!-- System Tools and Diagnostic Log -->
                            <UniformGrid Columns="2" Margin="0,0,0,0">
                                <!-- System Tools Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,16">
                                            <Border Width="32" Height="32" 
                                                    Background="#E0E7FF" 
                                                    CornerRadius="6" 
                                                    Margin="0,0,12,0">
                                                <TextBlock Text="⚙️" 
                                                           FontSize="16" 
                                                           HorizontalAlignment="Center" 
                                                           VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="System Tools" 
                                                           FontSize="16" 
                                                           FontWeight="SemiBold" 
                                                           Foreground="#374151"/>
                                                <TextBlock Text="Maintenance and utilities" 
                                                           FontSize="12" 
                                                           Foreground="#6B7280"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- System Info -->
                                        <Grid Margin="0,0,0,16">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <TextBlock Grid.Row="0" Grid.Column="0" Text="OS:" FontSize="12" FontWeight="Medium" Margin="0,0,8,4"/>
                                            <TextBlock Grid.Row="0" Grid.Column="1" Name="OSVersionText" Text="Loading..." FontSize="12" Margin="0,0,0,4"/>
                                            
                                            <TextBlock Grid.Row="1" Grid.Column="0" Text="App:" FontSize="12" FontWeight="Medium" Margin="0,0,8,4"/>
                                            <TextBlock Grid.Row="1" Grid.Column="1" Name="AppVersionText" Text="Loading..." FontSize="12" Margin="0,0,0,4"/>
                                            
                                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Uptime:" FontSize="12" FontWeight="Medium" Margin="0,0,8,4"/>
                                            <TextBlock Grid.Row="2" Grid.Column="1" Name="UptimeText" Text="Loading..." FontSize="12" Margin="0,0,0,4"/>
                                            
                                            <TextBlock Grid.Row="3" Grid.Column="0" Text="Credits:" FontSize="12" FontWeight="Medium" Margin="0,0,8,0"/>
                                            <TextBlock Grid.Row="3" Grid.Column="1" Name="FreeCreditUsedText" Text="$0.00" FontSize="12"/>
                                        </Grid>
                                        
                                        <!-- System Controls -->
                                        <StackPanel>
                                            <Button Name="RunDiagnosticsButton" Content="🔍 Run All Tests" 
                                                  Style="{StaticResource ModernButtonStyle}" 
                                                  Background="#0284C7" Foreground="White" FontSize="12"
                                                  Margin="0,0,0,8" Click="RunDiagnosticsButton_Click"/>
                                            
                                            <Grid>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="8"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <Button Grid.Column="0" Name="IssueFreeCreditsButton" Content="💰 Credit" 
                                                      Style="{StaticResource ModernButtonStyle}" 
                                                      Background="#059669" Foreground="White" FontSize="12"
                                                      Click="IssueFreeCreditsButton_Click"/>
                                                
                                                <Button Grid.Column="2" Name="RestartSystemButton" Content="🔄 Restart" 
                                                      Style="{StaticResource ModernButtonStyle}" 
                                                      Background="#DC2626" Foreground="White" FontSize="12"
                                                      Click="RestartSystemButton_Click"/>
                                            </Grid>
                                        </StackPanel>
                                    </StackPanel>
                                </Border>
                                
                                <!-- Diagnostic Log Card -->
                                <Border Background="#F8FAFC" 
                                        CornerRadius="12" 
                                        BorderBrush="#E5E7EB" 
                                        BorderThickness="1" 
                                        Padding="20" 
                                        Margin="8">
                                    <StackPanel>
                                        <!-- Header -->
                                        <Grid Margin="0,0,0,16">
                                            <StackPanel Orientation="Horizontal">
                                                <Border Width="32" Height="32" 
                                                        Background="#FEF3C7" 
                                                        CornerRadius="6" 
                                                        Margin="0,0,12,0">
                                                    <TextBlock Text="📋" 
                                                               FontSize="16" 
                                                               HorizontalAlignment="Center" 
                                                               VerticalAlignment="Center"/>
                                                </Border>
                                                <StackPanel>
                                                    <TextBlock Text="Diagnostic Log" 
                                                               FontSize="16" 
                                                               FontWeight="SemiBold" 
                                                               Foreground="#374151"/>
                                                    <TextBlock Text="Real-time system messages" 
                                                               FontSize="12" 
                                                               Foreground="#6B7280"/>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <Button Name="ClearLogButton" Content="Clear" 
                                                  Style="{StaticResource ModernButtonStyle}" 
                                                  Background="#64748B" Foreground="White" Padding="8,4" FontSize="11" 
                                                  HorizontalAlignment="Right" VerticalAlignment="Top"
                                                  Click="ClearLogButton_Click"/>
                                        </Grid>
                                        
                                        <Border BorderBrush="#E2E8F0" BorderThickness="1" CornerRadius="6" Height="180">
                                            <ScrollViewer Name="DiagnosticLogScrollViewer" VerticalScrollBarVisibility="Auto">
                                                <TextBlock Name="DiagnosticLogText" Text="Diagnostic log will appear here..." 
                                                         FontFamily="Consolas" FontSize="10" Foreground="#475569" 
                                                         Padding="8" TextWrapping="Wrap"/>
                                            </ScrollViewer>
                                        </Border>
                                    </StackPanel>
                                </Border>
                            </UniformGrid>
                        </StackPanel>
                    </Grid>

                    <!-- System Tab Content -->
                    <Grid Name="SystemTabContent" Visibility="Collapsed">
                        <StackPanel Margin="0,0,0,32">
                            
                            <!-- Header Section -->
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                                <StackPanel>
                                    <TextBlock Text="System Configuration" FontSize="32" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,8"/>
                                    <TextBlock Text="Configure payment hardware, printer settings, and system preferences" FontSize="16" Foreground="#64748B"/>
                                </StackPanel>
                            </StackPanel>



                            <!-- Payment System Configuration -->
                            <Border Background="White" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                </Border.Effect>
                                <StackPanel>
                                    <!-- Header -->
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Width="36" Height="36" Background="#FEF3C7" CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="💳" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <StackPanel>
                                            <TextBlock Text="Payment System" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                            <TextBlock Text="Configure payment hardware parameters" FontSize="14" Foreground="#64748B"/>
                                        </StackPanel>
                                    </StackPanel>

                                    <!-- Payment Configuration Grid -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="32"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="20"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <!-- Pulses Per Credit -->
                                        <Border Grid.Row="0" Grid.Column="0" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <TextBlock Text="Pulses Per Credit" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="Arduino pulses required per $1 credit" FontSize="12" Foreground="#6B7280" Margin="0,0,0,12"/>
                                                <Border Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12,8">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Name="PulsesPerCreditTextBox" Grid.Column="0" Text="1" FontSize="14" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                 behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"
                                                                 PreviewTextInput="NumericOnly_PreviewTextInput"
                                                                 DataObject.Pasting="NumericOnly_Pasting"/>
                                                        <TextBlock Grid.Column="1" Text="pulses" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="8,0,0,0"/>
                                                    </Grid>
                                                </Border>
                                            </StackPanel>
                                        </Border>

                                        <!-- Credit Value -->
                                        <Border Grid.Row="0" Grid.Column="2" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <TextBlock Text="Credit Value" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="Dollar value per credit unit" FontSize="12" Foreground="#6B7280" Margin="0,0,0,12"/>
                                                <Border Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12,8">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBlock Grid.Column="0" Text="$" FontSize="14" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                                        <TextBox Name="CreditValueTextBox" Grid.Column="1" Text="1.00" FontSize="14" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                 behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"
                                                                 PreviewTextInput="DecimalOnly_PreviewTextInput"
                                                                 DataObject.Pasting="DecimalOnly_Pasting"/>
                                                    </Grid>
                                                </Border>
                                            </StackPanel>
                                        </Border>

                                        <!-- Bill Acceptor Settings -->
                                        <Border Grid.Row="2" Grid.Column="0" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <Grid Margin="0,0,0,12">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Bill Acceptor" FontSize="14" FontWeight="SemiBold" Foreground="#374151"/>
                                                        <TextBlock Text="Enable cash payment acceptance" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                    <ToggleButton Name="BillAcceptorToggle" Grid.Column="1" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" IsChecked="True" VerticalAlignment="Center"/>
                                                </Grid>
                                                <TextBlock Text="Accepts $1, $5, $10, $20 bills" FontSize="11" Foreground="#9CA3AF"/>
                                            </StackPanel>
                                        </Border>

                                        <!-- Credit Card Reader Settings -->
                                        <Border Grid.Row="2" Grid.Column="2" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <Grid Margin="0,0,0,12">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Credit Card Reader" FontSize="14" FontWeight="SemiBold" Foreground="#374151"/>
                                                        <TextBlock Text="Enable credit/debit card payments" FontSize="12" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                    <ToggleButton Name="CreditCardReaderToggle" Grid.Column="1" Style="{StaticResource ModernToggleSwitchStyle}" Width="48" Height="24" IsChecked="True" VerticalAlignment="Center"/>
                                                </Grid>
                                                <TextBlock Text="Cantaloupe Engage compatible" FontSize="11" Foreground="#9CA3AF"/>
                                            </StackPanel>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- Hardware Configuration -->
                            <Border Background="White" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                </Border.Effect>
                                <StackPanel>
                                    <!-- Header -->
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Width="36" Height="36" Background="#F3E8FF" CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🔧" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <StackPanel>
                                            <TextBlock Text="Hardware Configuration" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                            <TextBlock Text="Configure printer, camera, and lighting settings" FontSize="14" Foreground="#64748B"/>
                                        </StackPanel>
                                    </StackPanel>

                                    <!-- Hardware Settings Grid -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="16"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="16"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Print Supply Settings -->
                                        <Border Grid.Column="0" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <TextBlock Text="Print Supply Tracking" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="Prints per roll (700 for DNP RX1hs)" FontSize="12" Foreground="#6B7280" Margin="0,0,0,12"/>
                                                <Border Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12,8" Margin="0,0,0,16">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Name="PrintsPerRollTextBox" Grid.Column="0" Text="700" FontSize="14" BorderThickness="0" Background="Transparent" VerticalAlignment="Center"
                                                                 behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"
                                                                 PreviewTextInput="NumericOnly_PreviewTextInput"
                                                                 DataObject.Pasting="NumericOnly_Pasting"/>
                                                        <TextBlock Grid.Column="1" Text="prints" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="8,0,0,0"/>
                                                    </Grid>
                                                </Border>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="RFID Detection" FontSize="12" FontWeight="Medium" Foreground="#374151"/>
                                                        <TextBlock Text="Auto-detect new paper rolls" FontSize="11" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                    <ToggleButton Name="SystemRFIDToggle" Grid.Column="1" Style="{StaticResource ModernToggleSwitchStyle}" Width="40" Height="20" IsChecked="True" VerticalAlignment="Center"/>
                                                </Grid>
                                            </StackPanel>
                                        </Border>

                                        <!-- Camera Flash Settings -->
                                        <Border Grid.Column="2" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <TextBlock Text="Camera Flash" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="LED lighting control settings" FontSize="12" Foreground="#6B7280" Margin="0,0,0,16"/>
                                                <Grid Margin="0,0,0,12">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Flash Enabled" FontSize="12" FontWeight="Medium" Foreground="#374151"/>
                                                        <TextBlock Text="Auto flash during capture" FontSize="11" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                    <ToggleButton Name="SystemFlashToggle" Grid.Column="1" Style="{StaticResource ModernToggleSwitchStyle}" Width="40" Height="20" IsChecked="True" VerticalAlignment="Center"/>
                                                </Grid>
                                                <TextBlock Text="Flash Duration" FontSize="12" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,4"/>
                                                <Border Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12,8">
                                                    <Grid>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>
                                                        <Slider Name="FlashDurationSlider" Grid.Column="0" 
                                                                Minimum="1" Maximum="10" Value="3" 
                                                                TickFrequency="1" IsSnapToTickEnabled="True" 
                                                                VerticalAlignment="Center" Margin="0,0,12,0"
                                                                ValueChanged="FlashDurationSlider_ValueChanged"/>
                                                        <TextBlock Name="FlashDurationValueText" Grid.Column="1" Text="3" FontSize="14" Foreground="#374151" VerticalAlignment="Center" MinWidth="20" TextAlignment="Center"/>
                                                        <TextBlock Grid.Column="2" Text="sec" FontSize="12" Foreground="#6B7280" VerticalAlignment="Center" Margin="4,0,0,0"/>
                                                    </Grid>
                                                </Border>
                                            </StackPanel>
                                        </Border>

                                        <!-- Date & Time Settings -->
                                        <Border Grid.Column="4" Background="#F8FAFC" CornerRadius="8" BorderBrush="#E2E8F0" BorderThickness="1" Padding="16">
                                            <StackPanel>
                                                <TextBlock Text="System Date &amp; Time" FontSize="14" FontWeight="SemiBold" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="System clock and seasonal templates" FontSize="12" Foreground="#6B7280" Margin="0,0,0,16"/>
                                                <Grid Margin="0,0,0,12">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Auto Seasonal Templates" FontSize="12" FontWeight="Medium" Foreground="#374151"/>
                                                        <TextBlock Text="Enable by calendar date" FontSize="11" Foreground="#6B7280"/>
                                                    </StackPanel>
                                                    <ToggleButton Name="SystemSeasonalToggle" Grid.Column="1" Style="{StaticResource ModernToggleSwitchStyle}" Width="40" Height="20" IsChecked="True" VerticalAlignment="Center"/>
                                                </Grid>
                                                <Button Name="SetSystemDateButton" Content="Set Date &amp; Time" Style="{StaticResource ModernButtonStyle}" Background="#F3F4F6" Foreground="#374151" Padding="12,8" Click="SetSystemDate_Click" HorizontalAlignment="Stretch"/>
                                            </StackPanel>
                                        </Border>
                                    </Grid>
                                </StackPanel>
                            </Border>

                            <!-- System Actions -->
                            <Border Background="White" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24">
                                <Border.Effect>
                                    <DropShadowEffect Color="#000000" BlurRadius="8" ShadowDepth="2" Opacity="0.1"/>
                                </Border.Effect>
                                <StackPanel>
                                    <!-- Header -->
                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                        <Border Width="36" Height="36" Background="#FEE2E2" CornerRadius="8" Margin="0,0,12,0">
                                            <TextBlock Text="🔄" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        </Border>
                                        <StackPanel>
                                            <TextBlock Text="System Actions" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                            <TextBlock Text="System maintenance and restart functions" FontSize="14" Foreground="#64748B"/>
                                        </StackPanel>
                                    </StackPanel>

                                    <!-- Action Buttons -->
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="16"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="16"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Restart Application -->
                                        <Button Name="RestartApplicationButton" Grid.Column="0" Style="{StaticResource ModernButtonStyle}" Background="#F59E0B" Foreground="White" Padding="16,12" Click="RestartApplication_Click">
                                            <StackPanel>
                                                <TextBlock Text="🔄" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Restart App" FontSize="14" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                                <TextBlock Text="Restart photobooth software" FontSize="11" Foreground="#FEF3C7" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </Button>

                                        <!-- Restart Computer -->
                                        <Button Name="RestartComputerButton" Grid.Column="2" Style="{StaticResource ModernButtonStyle}" Background="#EF4444" Foreground="White" Padding="16,12" Click="RestartComputer_Click">
                                            <StackPanel>
                                                <TextBlock Text="💻" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Restart PC" FontSize="14" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                                <TextBlock Text="Restart entire computer" FontSize="11" Foreground="#FEE2E2" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </Button>

                                        <!-- Save All Settings -->
                                        <Button Name="SaveSystemSettingsButton" Grid.Column="4" Style="{StaticResource ModernButtonStyle}" Background="#10B981" Foreground="White" Padding="16,12" Click="SaveSystemSettings_Click">
                                            <StackPanel>
                                                <TextBlock Text="💾" FontSize="20" HorizontalAlignment="Center" Margin="0,0,0,8"/>
                                                <TextBlock Text="Save Settings" FontSize="14" FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                                <TextBlock Text="Apply all changes" FontSize="11" Foreground="#D1FAE5" HorizontalAlignment="Center" Margin="0,2,0,0"/>
                                            </StackPanel>
                                        </Button>
                                    </Grid>
                                </StackPanel>
                            </Border>

                        </StackPanel>
                    </Grid>

                    <!-- Credits Tab Content -->
                    <Grid Name="CreditsTabContent" Visibility="Collapsed">
                        <StackPanel Margin="0,0,0,32">
                                
                                <!-- Header Section -->
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,24">
                                    <StackPanel>
                                        <TextBlock Text="Credit Management" FontSize="32" FontWeight="Bold" Foreground="#0F172A" Margin="0,0,0,8"/>
                                        <TextBlock Text="Manage credit balance and view transaction history" FontSize="16" Foreground="#64748B"/>
                                    </StackPanel>
                                </StackPanel>

                                <!-- Current Balance Card -->
                                <Border Background="#F8FAFC" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                            <Border Width="36" Height="36" Background="#DBEAFE" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="💳" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Current Balance" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                                <TextBlock Text="Available credits for customer purchases" FontSize="14" Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>
                                        
                                        <!-- Balance Display -->
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <StackPanel Grid.Column="0" VerticalAlignment="Center">
                                                <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                    <TextBlock Name="CurrentCreditsText" Text="$0" FontSize="48" FontWeight="Bold" Foreground="#374151"/>
                                                    <StackPanel VerticalAlignment="Bottom" Margin="12,0,0,8">
                                                        <TextBlock Text="USD" FontSize="14" FontWeight="SemiBold" Foreground="#6B7280"/>
                                                        <TextBlock Text="1:1 ratio" FontSize="12" Foreground="#9CA3AF"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </StackPanel>
                                            
                                            <!-- Quick Actions -->
                                            <StackPanel Grid.Column="1" VerticalAlignment="Center" Orientation="Horizontal" Margin="16,0,0,0">
                                                <Button Name="RefreshCreditsButton" Style="{StaticResource AdminActionButtonStyle}" 
                                                        Background="#3B82F6" BorderBrush="#3B82F6" Foreground="White" 
                                                        Padding="16,10" Margin="0,0,8,0" Click="RefreshCredits_Click">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="🔄" FontSize="14" Margin="0,0,6,0"/>
                                                        <TextBlock Text="Refresh" FontSize="13" FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </Button>
                                                <Button Name="ResetCreditsButton" Style="{StaticResource AdminActionButtonStyle}" 
                                                        Background="#DC2626" BorderBrush="#DC2626" Foreground="White" 
                                                        Padding="16,10" Click="ResetCredits_Click">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="⚠️" FontSize="14" Margin="0,0,6,0"/>
                                                        <TextBlock Text="Reset" FontSize="13" FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </Button>
                        </StackPanel>
                    </Grid>
                                    </StackPanel>
                                </Border>

                                <!-- Add Credits Card -->
                                <Border Background="#F8FAFC" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                            <Border Width="36" Height="36" Background="#DCFCE7" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="💸" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Add Credits" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                                <TextBlock Text="Issue credits manually or for testing" FontSize="14" Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Quick Add Buttons -->
                                        <TextBlock Text="Quick Add" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,12"/>
                                        <Grid Margin="0,0,0,20">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="8"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="8"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="8"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Button Name="Add1Credit" Grid.Column="0" Style="{StaticResource QuickCreditButtonStyle}" Content="$1" Click="QuickAddCredit_Click" Tag="1"/>
                                            <Button Name="Add5Credits" Grid.Column="2" Style="{StaticResource QuickCreditButtonStyle}" Content="$5" Click="QuickAddCredit_Click" Tag="5"/>
                                            <Button Name="Add10Credits" Grid.Column="4" Style="{StaticResource QuickCreditButtonStyle}" Content="$10" Click="QuickAddCredit_Click" Tag="10"/>
                                            <Button Name="Add20Credits" Grid.Column="6" Style="{StaticResource QuickCreditButtonStyle}" Content="$20" Click="QuickAddCredit_Click" Tag="20"/>
                                        </Grid>

                                        <!-- Custom Amount -->
                                        <TextBlock Text="Custom Amount" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                        <Grid Margin="0,0,0,16">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="12"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>
                                            <Border Grid.Column="0" Background="White" CornerRadius="6" BorderBrush="#D1D5DB" BorderThickness="1" Padding="12,8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="$" FontSize="14" Foreground="#6B7280" VerticalAlignment="Center" Margin="0,0,4,0"/>
                                                    <TextBox Name="CustomCreditNumberAmount" Grid.Column="1" Text="0" FontSize="14" BorderThickness="0" Background="Transparent" VerticalAlignment="Center" behaviors:VirtualKeyboardBehavior.EnableVirtualKeyboard="True"/>
                                                </Grid>
                                            </Border>
                                            <Button Name="AddCustomCreditButton" Grid.Column="2" Style="{StaticResource AdminActionButtonStyle}" 
                                                    Background="#3B82F6" BorderBrush="#3B82F6" Foreground="White" 
                                                    Padding="16,8" Click="AddCustomCredit_Click">
                                                <StackPanel Orientation="Horizontal">
                                                    <TextBlock Text="➕" FontSize="14" Margin="0,0,6,0"/>
                                                    <TextBlock Text="Add" FontSize="14" FontWeight="SemiBold"/>
                                                </StackPanel>
                                            </Button>
                                        </Grid>
                                    </StackPanel>
                                </Border>

                                <!-- Transaction History Card -->
                                <Border Background="#F8FAFC" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                            <Border Width="36" Height="36" Background="#FEF3C7" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="📈" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Transaction History" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                                <TextBlock Text="Recent credit activity and changes" FontSize="14" Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Activity List -->
                                        <StackPanel Name="CreditHistoryPanel" MaxHeight="250" Margin="0,0,0,16">
                                            <!-- Credit history items will be added here programmatically -->
                                            <Border Background="White" CornerRadius="6" BorderBrush="#E5E7EB" BorderThickness="1" Padding="12" Margin="0,0,0,8">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBlock Grid.Column="0" Text="➕" FontSize="12" Foreground="#10B981" VerticalAlignment="Center" Margin="0,0,8,0"/>
                                                    <TextBlock Grid.Column="1" Text="System initialized" FontSize="12" Foreground="#374151" VerticalAlignment="Center"/>
                                                    <TextBlock Grid.Column="2" Text="$0.00" FontSize="12" FontWeight="Medium" Foreground="#10B981" VerticalAlignment="Center"/>
                                                </Grid>
                                            </Border>
                                        </StackPanel>

                                        <!-- Clear History Button -->
                                        <Button Name="ClearHistoryButton" Style="{StaticResource AdminActionButtonStyle}" 
                                                Background="#6B7280" BorderBrush="#6B7280" Foreground="White" 
                                                Padding="16,8" HorizontalAlignment="Center" Click="ClearCreditHistory_Click">
                                            <StackPanel Orientation="Horizontal">
                                                <TextBlock Text="🧹" FontSize="13" Margin="0,0,6,0"/>
                                                <TextBlock Text="Clear History" FontSize="13" FontWeight="SemiBold"/>
                                            </StackPanel>
                                        </Button>
                                    </StackPanel>
                                </Border>

                                <!-- Database Management Card -->
                                <Border Background="#F8FAFC" CornerRadius="12" BorderBrush="#E5E7EB" BorderThickness="1" Padding="24" Margin="0,0,0,24">
                                    <StackPanel>
                                        <!-- Header -->
                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                                            <Border Width="36" Height="36" Background="#FEE2E2" CornerRadius="8" Margin="0,0,12,0">
                                                <TextBlock Text="🗂️" FontSize="18" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                            </Border>
                                            <StackPanel>
                                                <TextBlock Text="Database Management" FontSize="18" FontWeight="SemiBold" Foreground="#0F172A"/>
                                                <TextBlock Text="Advanced transaction cleanup and export options" FontSize="14" Foreground="#64748B"/>
                                            </StackPanel>
                                        </StackPanel>

                                        <!-- Current Status -->
                                        <Border Background="#F1F5F9" CornerRadius="6" Padding="12" Margin="0,0,0,16">
                                            <StackPanel>
                                                <TextBlock Text="Current Status" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <StackPanel Grid.Column="0">
                                                        <TextBlock Text="Total Transactions:" FontSize="12" Foreground="#6B7280"/>
                                                        <TextBlock Name="TotalTransactionsText" Text="Loading..." FontSize="16" FontWeight="SemiBold" Foreground="#374151"/>
                                                    </StackPanel>
                                                    <StackPanel Grid.Column="1">
                                                        <TextBlock Text="Database Size:" FontSize="12" Foreground="#6B7280"/>
                                                        <TextBlock Text="&lt; 1 MB" FontSize="16" FontWeight="SemiBold" Foreground="#059669"/>
                                                    </StackPanel>
                                                </Grid>
                                            </StackPanel>
                                        </Border>

                                        <!-- Management Actions -->
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="12"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            
                                            <!-- Export History -->
                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="Export History" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="Save transaction history to CSV file for permanent records" FontSize="12" Foreground="#6B7280" TextWrapping="Wrap" Margin="0,0,0,12"/>
                                                <Button Name="ExportTransactionsButton" Style="{StaticResource AdminActionButtonStyle}" 
                                                        Background="#059669" BorderBrush="#059669" Foreground="White" 
                                                        Padding="16,10" Click="ExportTransactions_Click">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="📊" FontSize="14" Margin="0,0,6,0"/>
                                                        <TextBlock Text="Export CSV" FontSize="14" FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </Button>
                                            </StackPanel>
                                            
                                            <!-- Cleanup Old Records -->
                                            <StackPanel Grid.Column="2">
                                                <TextBlock Text="Cleanup Database" FontSize="14" FontWeight="Medium" Foreground="#374151" Margin="0,0,0,8"/>
                                                <TextBlock Text="Remove old transactions while keeping the most recent 1000 records" FontSize="12" Foreground="#6B7280" TextWrapping="Wrap" Margin="0,0,0,12"/>
                                                <Button Name="CleanupDatabaseButton" Style="{StaticResource AdminActionButtonStyle}" 
                                                        Background="#DC2626" BorderBrush="#DC2626" Foreground="White" 
                                                        Padding="16,10" Click="CleanupDatabase_Click">
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Text="🧹" FontSize="14" Margin="0,0,6,0"/>
                                                        <TextBlock Text="Cleanup" FontSize="14" FontWeight="SemiBold"/>
                                                    </StackPanel>
                                                </Button>
                                            </StackPanel>
                                        </Grid>
                                    </StackPanel>
                                </Border>



                        </StackPanel>
                    </Grid>

                </Grid>
            </ScrollViewer>
        </Grid>
    </Grid>
</UserControl> 